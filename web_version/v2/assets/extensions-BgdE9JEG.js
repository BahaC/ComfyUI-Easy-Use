var e,t,n,s,i,o,a,l,r,A,d,u,p,c,h=Object.defineProperty,m=(e,t,n)=>((e,t,n)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);import{d as f,h as g}from"./vendor-DS46y2Fr.js";import{c as y}from"./lodash-CZi7izHi.js";let v=(null==(t=null==(e=window.comfyAPI)?void 0:e.app)?void 0:t.app)||null,b=(null==(s=null==(n=window.comfyAPI)?void 0:n.api)?void 0:s.api)||null,_=(null==(o=null==(i=window.comfyAPI)?void 0:i.ui)?void 0:o.$el)||null,L=(null==(l=null==(a=window.comfyAPI)?void 0:a.dialog)?void 0:l.ComfyDialog)||null,w=(null==(A=null==(r=window.comfyAPI)?void 0:r.widgets)?void 0:A.ComfyWidgets)||null,S=(null==(u=null==(d=window.comfyAPI)?void 0:d.utils)?void 0:u.applyTextReplacements)||null,E=(null==(c=null==(p=window.comfyAPI)?void 0:p.groupNode)?void 0:c.GroupNodeConfig)||null;const k=e=>{var t,n;return e?null==(n=null==(t=null==v?void 0:v.ui)?void 0:t.settings)?void 0:n.getSettingValue(e):null};function x(e,t=null){try{let n=e?k(e):null;return null==n&&(n=t?localStorage[t]:localStorage[e]||null),n}catch(n){return null}}function N(e,t=e=>{}){var n;const s=null==(n=v.ui.settings.settingsLookup)?void 0:n[e];s&&(s.onChange=e=>t(e))}async function C(e,t,n=null){var s,i;try{(null==(i=null==(s=null==v?void 0:v.ui)?void 0:s.settings)?void 0:i.setSettingValue)?v.ui.settings.setSettingValue(e,t):await b.storeSetting(e,t),n&&(localStorage[n]="object"==typeof t?JSON.stringify(t):t)}catch(o){}}const T="comfyui-easyuse-",I="dark-theme",O="#236692",R={PIPE_LINE:"#7737AA",PIPE_LINE_SDXL:"#7737AA",INT:"#29699C",X_Y:"#38291f",XYPLOT:"#74DA5D",LORA_STACK:"#94dccd",CONTROL_NET_STACK:"#94dccd",FLOW_CONTROL:"#373780"},D=0x4000000000000,M=["loaders","latent","image","mask","sampling","_for_testing","advanced","utils","api"],P={ALWAYS:0,NEVER:2,BYPASS:4},G="easyuse_nodes_map",z="data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAABkAAD/4QMyaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA5LjEtYzAwMSA3OS4xNDYyODk5Nzc3LCAyMDIzLzA2LzI1LTIzOjU3OjE0ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjUuMyAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2RkFERDc2MUNDRkIxMUVGQjFENkE0NzFCNTUzRkQ0MCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2RkFERDc2MkNDRkIxMUVGQjFENkE0NzFCNTUzRkQ0MCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjUyMkMxRkIyQ0M0QzExRUZCMUQ2QTQ3MUI1NTNGRDQwIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjZGQURENzYwQ0NGQjExRUZCMUQ2QTQ3MUI1NTNGRDQwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+/+4ADkFkb2JlAGTAAAAAAf/bAIQAAQEBAQEBAQEBAQEB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",j=LGraphCanvas.node_colors.bgcolor,V={ColorPalette:{version:106,id:"obsidian",name:"Obsidian",colors:{node_slot:{CLIP:"#FFD500",CLIP_VISION:"#A8DADC",CLIP_VISION_OUTPUT:"#ad7452",CONDITIONING:"#FFA931",CONTROL_NET:"#6EE7B7",IMAGE:"#64B5F6",LATENT:"#FF9CF9",MASK:"#81C784",MODEL:"#B39DDB",STYLE_MODEL:"#C2FFAE",VAE:"#FF6E6E",TAESD:"#DCC274",PIPE_LINE:"#7737AA",PIPE_LINE_SDXL:"#7737AA",INT:"#29699C",X_Y:"#38291f",XYPLOT:"#74DA5D",LORA_STACK:"#94dccd",CONTROL_NET_STACK:"#94dccd"},litegraph_base:{BACKGROUND_IMAGE:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAIAAAD/gAIDAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQBJREFUeNrs1rEKwjAUhlETUkj3vP9rdmr1Ysammk2w5wdxuLgcMHyptfawuZX4pJSWZTnfnu/lnIe/jNNxHHGNn//HNbbv+4dr6V+11uF527arU7+u63qfa/bnmh8sWLBgwYJlqRf8MEptXPBXJXa37BSl3ixYsGDBMliwFLyCV/DeLIMFCxYsWLBMwSt4Be/NggXLYMGCBUvBK3iNruC9WbBgwYJlsGApeAWv4L1ZBgsWLFiwYJmCV/AK3psFC5bBggULloJX8BpdwXuzYMGCBctgwVLwCl7Be7MMFixYsGDBsu8FH1FaSmExVfAxBa/gvVmwYMGCZbBg/W4vAQYA5tRF9QYlv/QAAAAASUVORK5CYII=",CLEAR_BACKGROUND_COLOR:"#222222",NODE_TITLE_COLOR:"#d4d4d8",NODE_SELECTED_TITLE_COLOR:"#ffffff",NODE_TEXT_SIZE:14,NODE_TEXT_COLOR:"#ffffff",NODE_SUBTEXT_SIZE:12,NODE_DEFAULT_COLOR:"#09090b",NODE_DEFAULT_BGCOLOR:"rgba(24,24,27,.9)",NODE_DEFAULT_BOXCOLOR:"rgba(255,255,255,.75)",NODE_DEFAULT_SHAPE:2,NODE_BOX_OUTLINE_COLOR:O,DEFAULT_SHADOW_COLOR:"rgba(0,0,0,0)",DEFAULT_GROUP_FONT:24,WIDGET_BGCOLOR:"#242427",WIDGET_OUTLINE_COLOR:"#3f3f46",WIDGET_TEXT_COLOR:"#d4d4d8",WIDGET_SECONDARY_TEXT_COLOR:"#d4d4d8",LINK_COLOR:"#9A9",EVENT_LINK_COLOR:"#A86",CONNECTING_LINK_COLOR:"#AFA"},comfy_base:{"fg-color":"#fff","bg-color":"#09090b","comfy-menu-bg":"rgba(24,24,24,.9)","comfy-input-bg":"#262626","input-text":"#ddd","descrip-text":"#999","drag-text":"#ccc","error-text":"#ff4444","border-color":"#29292c","tr-even-bg-color":"rgba(28,28,28,.9)","tr-odd-bg-color":"rgba(19,19,19,.9)"}}},NODE_COLORS:{red:{color:"#af3535",bgcolor:j,groupcolor:"#A88"},brown:{color:"#38291f",bgcolor:j,groupcolor:"#b06634"},green:{color:"#346434",bgcolor:j,groupcolor:"#8A8"},blue:{color:"#1f1f48",bgcolor:j,groupcolor:"#88A"},pale_blue:{color:"#006691",bgcolor:j,groupcolor:"#3f789e"},cyan:{color:"#008181",bgcolor:j,groupcolor:"#8AA"},purple:{color:"#422342",bgcolor:j,groupcolor:"#a1309b"},yellow:{color:"#c09430",bgcolor:j,groupcolor:"#b58b2a"},black:{color:"rgba(0,0,0,.8)",bgcolor:j,groupcolor:"#444"}}};let U=JSON.parse(JSON.stringify(V));delete U.NODE_COLORS,U.ColorPalette.id="obsidian_dark",U.ColorPalette.name="Obsidian Dark",U.ColorPalette.colors.litegraph_base.BACKGROUND_IMAGE="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAIAAAD/gAIDAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGlmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OSwgMjAyMy8wNi8yNS0yMDowMTo1NSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMy0xMS0xM1QwMDoxODowMiswMTowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjMtMTEtMTVUMDI6MDQ6NTkrMDE6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjMtMTEtMTVUMDI6MDQ6NTkrMDE6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmIyYzRhNjA5LWJmYTctYTg0MC1iOGFlLTk3MzE2ZjM1ZGIyNyIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjk0ZmNlZGU4LTE1MTctZmQ0MC04ZGU3LWYzOTgxM2E3ODk5ZiIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjIzMWIxMGIwLWI0ZmItMDI0ZS1iMTJlLTMwNTMwM2NkMDdjOCI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MjMxYjEwYjAtYjRmYi0wMjRlLWIxMmUtMzA1MzAzY2QwN2M4IiBzdEV2dDp3aGVuPSIyMDIzLTExLTEzVDAwOjE4OjAyKzAxOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjUuMSAoV2luZG93cykiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjQ4OWY1NzlmLTJkNjUtZWQ0Zi04OTg0LTA4NGE2MGE1ZTMzNSIgc3RFdnQ6d2hlbj0iMjAyMy0xMS0xNVQwMjowNDo1OSswMTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpiMmM0YTYwOS1iZmE3LWE4NDAtYjhhZS05NzMxNmYzNWRiMjciIHN0RXZ0OndoZW49IjIwMjMtMTEtMTVUMDI6MDQ6NTkrMDE6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyNS4xIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4OTe6GAAAAx0lEQVR42u3WMQoAIQxFwRzJys77X8vSLiRgITif7bYbgrwYc/mKXyBoY4VVBgsWLFiwYFmOlTv+9jfDOjHmr8u6eVkGCxYsWLBgmc5S8ApewXvgYRksWLBgKXidpeBdloL3wMOCBctgwVLwCl7BuyyDBQsWLFiwTGcpeAWv4D3wsAwWLFiwFLzOUvAuS8F74GHBgmWwYCl4Ba/gXZbBggULFixYprMUvIJX8B54WAYLFixYCl5nKXiXpeA98LBgwTJYsGC9tg1o8f4TTtqzNQAAAABJRU5ErkJggg==",U.ColorPalette.colors.litegraph_base.CLEAR_BACKGROUND_COLOR="#09090b";const W=LGraphCanvas.node_colors.bgcolor,F={ColorPalette:{id:"milk_white",name:"Milk White",colors:{node_slot:{CLIP:"#FFA726",CLIP_VISION:"#5C6BC0",CLIP_VISION_OUTPUT:"#8D6E63",CONDITIONING:"#EF5350",CONTROL_NET:"#66BB6A",IMAGE:"#42A5F5",LATENT:"#AB47BC",MASK:"#9CCC65",MODEL:"#7E57C2",STYLE_MODEL:"#D4E157",VAE:"#FF7043",PIPE_LINE:"#7737AA",PIPE_LINE_SDXL:"#7737AA",INT:"#29699C",X_Y:"#38291f",XYPLOT:"#74DA5D",LORA_STACK:"#94dccd",CONTROL_NET_STACK:"#94dccd"},litegraph_base:{BACKGROUND_IMAGE:"data:image/gif;base64,R0lGODlhZABkALMAAAAAAP///+vr6+rq6ujo6Ofn5+bm5uXl5d3d3f///wAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAkALAAAAABkAGQAAAT/UMhJq7046827HkcoHkYxjgZhnGG6si5LqnIM0/fL4qwwIMAg0CAsEovBIxKhRDaNy2GUOX0KfVFrssrNdpdaqTeKBX+dZ+jYvEaTf+y4W66mC8PUdrE879f9d2mBeoNLfH+IhYBbhIx2jkiHiomQlGKPl4uZe3CaeZifnnijgkESBqipqqusra6vsLGys62SlZO4t7qbuby7CLa+wqGWxL3Gv3jByMOkjc2lw8vOoNSi0czAncXW3Njdx9Pf48/Z4Kbbx+fQ5evZ4u3k1fKR6cn03vHlp7T9/v8A/8Gbp4+gwXoFryXMB2qgwoMMHyKEqA5fxX322FG8tzBcRnMW/zlulPbRncmQGidKjMjyYsOSKEF2FBlJQMCbOHP6c9iSZs+UnGYCdbnSo1CZI5F64kn0p1KnTH02nSoV3dGTV7FFHVqVq1dtWcMmVQZTbNGu72zqXMuW7danVL+6e4t1bEy6MeueBYLXrNO5Ze36jQtWsOG97wIj1vt3St/DjTEORss4nNq2mDP3e7w4r1bFkSET5hy6s2TRlD2/mSxXtSHQhCunXo26NevCpmvD/UU6tuullzULH76q92zdZG/Ltv1a+W+osI/nRmyc+fRi1Xdbh+68+0vv10dH3+77KD/i6IdnX669/frn5Zsjh4/2PXju8+8bzc9/6fj27LFnX11/+IUnXWl7BJfegm79FyB9JOl3oHgSklefgxAC+FmFGpqHIYcCfkhgfCohSKKJVo044YUMttggiBkmp6KFXw1oII24oYhjiDByaKOOHcp3Y5BD/njikSkO+eBREQAAOw==",CLEAR_BACKGROUND_COLOR:"lightgray",NODE_TITLE_COLOR:"#222",NODE_SELECTED_TITLE_COLOR:"#000",NODE_TEXT_SIZE:14,NODE_TEXT_COLOR:"#444",NODE_SUBTEXT_SIZE:12,NODE_DEFAULT_COLOR:"#F7F7F7",NODE_DEFAULT_BGCOLOR:"#F5F5F5",NODE_DEFAULT_BOXCOLOR:"#555",NODE_DEFAULT_SHAPE:2,NODE_BOX_OUTLINE_COLOR:"#000",DEFAULT_SHADOW_COLOR:"rgba(0,0,0,0.1)",DEFAULT_GROUP_FONT:24,WIDGET_BGCOLOR:"#D4D4D4",WIDGET_OUTLINE_COLOR:"#999",WIDGET_TEXT_COLOR:"#222",WIDGET_SECONDARY_TEXT_COLOR:"#555",LINK_COLOR:"#9A9",EVENT_LINK_COLOR:"#FF9800",CONNECTING_LINK_COLOR:"#222"},comfy_base:{"fg-color":"#222","bg-color":"#DDD","comfy-menu-bg":"#F5F5F5","comfy-input-bg":"#C9C9C9","input-text":"#222","descrip-text":"#444","drag-text":"#555","error-text":"#F44336","border-color":"#bbb","tr-even-bg-color":"#f9f9f9","tr-odd-bg-color":"#fff","content-bg":"#e0e0e0","content-fg":"#222","content-hover-bg":"#adadad","content-hover-fg":"#222"}}},NODE_COLORS:{red:{color:"#af3535",bgcolor:W,groupcolor:"#A88"},brown:{color:"#38291f",bgcolor:W,groupcolor:"#b06634"},green:{color:"#346434",bgcolor:W,groupcolor:"#8A8"},blue:{color:"#1f1f48",bgcolor:W,groupcolor:"#88A"},pale_blue:{color:"#006691",bgcolor:W,groupcolor:"#3f789e"},cyan:{color:"#008181",bgcolor:W,groupcolor:"#8AA"},purple:{color:"#422342",bgcolor:W,groupcolor:"#a1309b"},yellow:{color:"#c09430",bgcolor:W,groupcolor:"#b58b2a"},black:{color:"rgba(0,0,0,.8)",bgcolor:W,groupcolor:"#444"}}},X={"Workflow created by":"工作流创建者","Watch more video content":"观看更多视频内容","Workflow Guide":"工作流指南","💎 View Checkpoint Info...":"💎 查看 Checkpoint 信息...","💎 View Lora Info...":"💎 查看 Lora 信息...","🔃 Reload Node":"🔃 刷新节点","Updated At:":"最近更新：","Created At:":"首次发布：","✏️ Edit":"✏️ 编辑","💾 Save":"💾 保存","No notes":"当前还没有备注内容","Saving Notes...":"正在保存备注...","Type your notes here":"在这里输入备注内容",ModelName:"模型名称","Models Required":"所需模型","Download Model":"下载模型","Source Url":"模型源地址",Notes:"备注",Type:"类型","Trained Words":"训练词",BaseModel:"基础算法",Details:"详情",Description:"描述",Download:"下载量",Source:"来源","Saving Preview...":"正在保存预览图...","Saving Succeed":"保存成功","Clean SuccessFully":"清理成功","Clean Failed":"清理失败","Saving Failed":"保存失败","No COMBO link":"沒有找到COMBO连接","Reboot ComfyUI":"重启ComfyUI","Are you sure you'd like to reboot the server?":"是否要重启ComfyUI？","Nodes Map":"管理节点组","Nodes map sorting mode":"管理节点组排序模式","No Nodes":"未找到节点","No nodes found in the map":"在工作流程中没有找到节点","Expand All":"展开所有组","Collapse All":"折叠所有组",Close:"关闭","Default automatic sorting, if set to manual, groups can be dragged and dropped and the sorting results saved.":"默认自动排序，如果设置为手动，组可以拖放并保存排序结果。","For drag and drop sorting, please find Nodes map sorting mode in Settings->EasyUse and change it to manual":"如需拖拽排序请在设置->EasyUse节点中找到管理节点组排序模式并修改成 manual",Queue:"队列","Cleanup Of VRAM Usage":"清理显存占用","Please stop all running tasks before cleaning GPU":"请在清理GPU之前停止所有运行中的任务",Always:"启用中",Bypass:"已忽略",Never:"已停用","Auto Sorting":"自动排序","Toggle `Show/Hide` can set mode of group, LongPress can set group nodes to never":"点击`启用中/已忽略`可设置组模式, 长按可停用该组节点","Enable Shift+Up/Down/Left/Right key and Shift+Ctrl+Alt+Left/Right to align selected nodes":"启用 Shift+上/下/左/右 和 Shift+Ctrl+Alt+左/右 键对齐选中的节点","Enable Shift+Ctrl+Left/Right key to normalize selected nodes":"启用 Shift+Ctrl+左/右 键规范化选中的节点","Enable Shift+g to add selected nodes to a group":"启用 Shift+g 键将选中的节点添加一个组","Enable Shift+r to unload models and node cache":"启用 Shift+r 键卸载模型和节点缓存","Enable Shift+m to toggle nodes map":"启用 Shift+m 键显隐管理节点组","Enable Up/Down/Left/Right key to jump nearest nodes":"启用 上/下/左/右 键跳转到最近的前后节点","Enable Alt+1~9 to paste nodes from nodes template":"启用 Alt+1~9 从节点模板粘贴到工作流中","Enable contextMenu auto nest subdirectories":"启用上下文菜单自动嵌套子目录","Enable right-click menu to add node A~Z sorting":"启用右键菜单中新建节点A~Z排序","Enable model thumbnails display":"启动模型预览图显示","Enable nodes runtime display":"启动节点运行时间显示","Enable chain get node and set node with parent nodes":"启用将获取点和设置点与父节点链在一起","Maximum number of model thumbnails displayed":"显示的模型缩略图的最大数量","Too many thumbnails will affect the first loading time, set the maximum value to not load the thumbnail function when there are too many models's thumbnail":"太多的缩略图会影响首次加载时间，当模型缩略图太多时，设置最大值以不加载缩略图功能","Too many thumbnails, have closed the display":"模型缩略图太多啦，为您关闭了显示","Shift+Up/Down/Left/Right can align selected nodes, Shift+Ctrl+Alt+Left/Right can distribute horizontal/vertical nodes":"Shift+上/下/左/右 可以对齐选中的节点, Shift+Ctrl+Alt+左/右 可以水平/垂直分布节点","Enable Shift+Ctrl+Left key to normalize width and Shift+Ctrl+Right key to normalize height":"启用 Shift+Ctrl+左 键规范化宽度和 Shift+Ctrl+右 键规范化高度","After v1.2.39, Ctrl+g can be used instead of it":"从v1.2.39开始，可以使用Ctrl+g代替","Use three shortcut buttons in the right-click menu":"在右键菜单中使用三个快捷按钮","Enable Nodes Map":"启用节点组管理","You need to refresh the page to update successfully":"您需要刷新页面以成功更新","Get styles list Failed":"获取样式列表失败","Get style image Failed":"获取样式图片失败","Empty All":"清空所有","Type here to search styles ...":"在此处输入以搜索样式 ...","Loading UserInfo...":"正在获取用户信息...","Please set the APIKEY first":"请先设置APIKEY","Setting APIKEY":"设置APIKEY","Save Account Info":"保存账号信息",Choose:"选择",Delete:"删除",Edit:"编辑","At least one account is required":"删除失败: 至少需要一个账户","APIKEY is not Empty":"APIKEY 不能为空","Add Account":"添加账号","Getting Your APIKEY":"获取您的APIKEY","Choose Selected Images":"选择选中的图片","Choose images to continue":"选择图片以继续",Background:"背景",Hat:"帽子",Hair:"头发",Body:"身体",Face:"脸部",Clothes:"衣服",Others:"其他",Glove:"手套",Glasses:"眼镜",Sunglasses:"太阳镜","Upper-clothes":"上衣","Top-clothes":"上衣","Bottom-clothes":"下身装","Torso-skin":"皮肤",Dress:"连衣裙",Coat:"外套",Socks:"袜子",Pants:"裤子",Jumpsuits:"连体衣",Scarf:"围巾",Skirt:"裙子","Left-arm":"左臂","Right-arm":"右臂","Left-leg":"左腿","Right-leg":"右腿","Left-foot":"左脚","Right-foot":"右脚","Left-shoe":"左鞋","Right-shoe":"右鞋",s:"秒","No Node Templates Found":"未找到节点模板预设","Get Node Templates File Failed":"获取节点模板文件失败","Node template with {key} not set":"未设置快捷键为{key}的节点预设","ComfyUI Basic":"ComfyUI 基础节点","Recommend Nodes":"推荐节点","Others A~Z":"其他节点 A~Z"},Z=x("Comfy.Locale"),q=(e,t=!1)=>{switch(t?navigator.language:Z){case"zh-CN":case"zh":return X[e]||e;default:return e}},H={addGroup:{id:"EasyUse.Hotkeys.AddGroup",name:q("Enable Shift+g to add selected nodes to a group"),tooltip:q("After v1.2.39, Ctrl+g can be used instead of it"),type:"boolean",defaultValue:!0},cleanVRAMUsed:{id:"EasyUse.Hotkeys.cleanVRAMUsed",name:q("Enable Shift+r to unload models and node cache"),type:"boolean",defaultValue:!0},toggleSiteMap:{id:"EasyUse.Hotkeys.toggleNodesMap",name:q("Enable Shift+m to toggle nodes map"),type:"boolean",defaultValue:!0},alignSelectedNodes:{id:"EasyUse.Hotkeys.AlignSelectedNodes",name:q("Enable Shift+Up/Down/Left/Right key and Shift+Ctrl+Alt+Left/Right to align selected nodes"),tooltip:q("Shift+Up/Down/Left/Right can align selected nodes, Shift+Ctrl+Alt+Left/Right can distribute horizontal/vertical nodes"),type:"boolean",defaultValue:!0},NormalizeSelectedNodes:{id:"EasyUse.Hotkeys.NormalizeSelectedNodes",name:q("Enable Shift+Ctrl+Left/Right key to normalize selected nodes"),tooltip:q("Enable Shift+Ctrl+Left key to normalize width and Shift+Ctrl+Right key to normalize height"),type:"boolean",defaultValue:!0},nodesTemplate:{id:"EasyUse.Hotkeys.NodesTemplate",name:q("Enable Alt+1~9 to paste nodes from nodes template"),type:"boolean",defaultValue:!0},jumpNearestNodes:{id:"EasyUse.Hotkeys.JumpNearestNodes",name:q("Enable Up/Down/Left/Right key to jump nearest nodes"),type:"boolean",defaultValue:!0},subDirectories:{id:"EasyUse.ContextMenu.SubDirectories",name:q("Enable contextMenu auto nest subdirectories"),type:"boolean",defaultValue:!1},modelsThumbnails:{id:"EasyUse.ContextMenu.ModelsThumbnails",name:q("Enable model thumbnails display"),type:"boolean",defaultValue:!1},rightMenuNodesSort:{id:"EasyUse.ContextMenu.NodesSort",name:q("Enable right-click menu to add node A~Z sorting"),type:"boolean",defaultValue:!0},quickOptions:{id:"EasyUse.ContextMenu.QuickOptions",name:q("Use three shortcut buttons in the right-click menu"),type:"combo",options:["At the forefront","At the end","Disable"],defaultValue:"At the forefront"},nodesRuntime:{id:"EasyUse.Nodes.Runtime",name:q("Enable nodes runtime display"),type:"boolean",defaultValue:!0},chainGetSet:{id:"EasyUse.Nodes.ChainGetSet",name:q("Enable chain get node and set node with parent nodes"),type:"boolean",defaultValue:!0},nodesMap:{id:"EasyUse.NodesMap.Sorting",name:q("Nodes map sorting mode"),tooltip:q("Default automatic sorting, if set to manual, groups can be dragged and dropped and the sorting results saved."),type:"combo",options:["Auto sorting","Manual drag&drop sorting"],defaultValue:"Auto sorting"},enableNodesMap:{id:"EasyUse.NodesMap.Enable",name:q("Enable Nodes Map"),tooltip:q("You need to refresh the page to update successfully"),type:"boolean",defaultValue:!0}};function K(e=100,t){return new Promise((n=>{setTimeout((()=>{n(t)}),e)}))}function Y(e,t){if(e="number"==typeof e?e:e instanceof Date?e.getTime():parseInt(e),isNaN(e))return null;let n=new Date(e);(e=n.toString().split(/[\s\:]/g).slice(0,-2))[1]=["01","02","03","04","05","06","07","08","09","10","11","12"][n.getMonth()];let s={MM:1,dd:2,yyyy:3,hh:4,mm:5,ss:6};return t.replace(/([Mmdhs]|y{2})\1/g,(t=>e[s[t]]))}const J=/Mac|iPod|iPhone|iPad/.test(navigator.platform),B=e=>J?e.replace(/Ctrl/g,"⌘").replace(/Alt/g,"⌥").replace(/Shift/g,"⇧"):e,Q=f("groups",{state:e=>({groups:[],nodes:[],isWatching:!1}),getters:{groups_nodes(){var e;let t=[],n=[];if((null==(e=this.nodes)?void 0:e.length)>0){this.nodes.map((e=>{let s=e.pos,i=!1;for(let n=0;n<this.groups.length;n++){let o=this.groups[n];if(s[0]>o.pos[0]&&s[0]<o.pos[0]+o.size[0]&&s[1]>o.pos[1]&&s[1]<o.pos[1]+o.size[1]){t[n]||(t[n]={info:o,children:[]}),t[n].children.push(e),i=!0;break}}i||n.push({info:e})}));for(let e=0;e<this.groups.length;e++)t[e]||(t[e]={info:this.groups[e],children:[]})}return[...t,...n]}},actions:{setGroups(e){this.groups="Manual drag&drop sorting"==x("EasyUse.NodesMap.Sorting")?y(e):y(e.sort(((e,t)=>e.pos[0]-t.pos[0])).sort(((e,t)=>e.pos[1]-t.pos[1])))},setNodes(e){this.nodes=y(e)},update(){var e,t,n;(((null==(e=v.extensionManager)?void 0:e.activeSidebarTab)||(null==(n=null==(t=v.extensionManager.sidebarTab)?void 0:t.activeSidebarTab)?void 0:n.id))===G||this.isWatching)&&setTimeout((e=>{this.setGroups(v.canvas.graph._groups),this.setNodes(v.canvas.graph._nodes)}),1)},watchGraph(e=!1){e&&(this.isWatching=!0);let t=this;this.update();const n=v.graph.onNodeAdded;v.graph.onNodeAdded=function(e){t.update();const s=e.onRemoved;return e.onRemoved=function(){return t.update(),null==s?void 0:s.apply(this,arguments)},null==n?void 0:n.apply(this,arguments)},v.canvas.onNodeMoved=function(e){t.update()};const s=LGraphCanvas.onNodeAlign;LGraphCanvas.onNodeAlign=function(e){return t.update(),null==s?void 0:s.apply(this,arguments)};const i=LGraphCanvas.onGroupAdd;LGraphCanvas.onGroupAdd=function(){return t.update(),null==i?void 0:i.apply(this,arguments)};const o=LGraphCanvas.onGroupAlign;LGraphCanvas.onGroupAlign=function(e){return t.update(),null==o?void 0:o.apply(this,arguments)};const a=LGraphCanvas.onMenuNodeRemove;LGraphCanvas.onMenuNodeRemove=function(e){return t.update(),null==a?void 0:a.apply(this,arguments)}},unwatchGraph(){this.isWatching=!1}}});let $=null;const ee=["custom_obsidian","custom_obsidian_dark","custom_milk_white","obsidian_dark","obsidian","milk_white"],te={"easy positive":"green","easy negative":"red","easy promptList":"cyan","easy promptLine":"cyan","easy promptConcat":"cyan","easy promptReplace":"cyan","easy forLoopStart":"blue","easy forLoopEnd":"blue","easy loadImagesForLoop":"blue"};let ne=LGraphCanvas.node_colors,se=null,ie=null,oe=null,ae=null;for(let yn in H){const e="Disabled"==x("Comfy.UseNewMenu")?"👽 "+B(H[yn].name):B(H[yn].name),t=H[yn].tooltip?B(H[yn].tooltip):"";le={...H[yn],name:e,tooltip:t},v.ui.settings.settingsLookup[le.id]||v.ui.settings.addSetting(le)}var le;function re(e,t=!1){let n="after",s="before";t&&([s,n]=[n,s]),e.label=(e.label??e.name).replace(s,n),e.name=e.label}function Ae(e,t,n,s,i,o,a){t.strokeStyle=s,t.fillStyle=LiteGraph.use_legacy_node_error_indicator?"#F00":i;const l=LiteGraph.NODE_TITLE_HEIGHT,r=this.ds.scale<.5,{collapsed:A}=e.flags,d=e._shape||e.constructor.shape||LiteGraph.ROUND_SHAPE,{title_mode:u}=e.constructor,p=u!=LiteGraph.TRANSPARENT_TITLE&&u!=LiteGraph.NO_TITLE;let c=new Float32Array(4);c=[0,p?-l:0,n[0]+1,p?n[1]+l:n[1]];let h=t.globalAlpha;if(t.lineWidth=1,t.beginPath(),d==LiteGraph.BOX_SHAPE||r?t.fillRect(c[0],c[1],c[2],c[3]):d==LiteGraph.ROUND_SHAPE||d==LiteGraph.CARD_SHAPE?t.roundRect(c[0],c[1],c[2],c[3],d==LiteGraph.CARD_SHAPE?[this.round_radius,this.round_radius,0,0]:[this.round_radius]):d==LiteGraph.CIRCLE_SHAPE&&t.arc(.5*n[0],.5*n[1],.5*n[0],0,2*Math.PI),t.strokeStyle=LiteGraph.WIDGET_OUTLINE_COLOR,t.stroke(),t.strokeStyle=s,t.fill(),e.has_errors&&!LiteGraph.use_legacy_node_error_indicator&&this.strokeShape(t,c,{shape:d,title_mode:u,title_height:l,padding:12,colour:LiteGraph.NODE_ERROR_COLOUR,collapsed:A,thickness:10}),!A&&p&&(t.shadowColor="transparent",t.fillStyle="rgba(0,0,0,0.2)",t.fillRect(0,-1,c[2],2)),t.shadowColor="transparent",e.onDrawBackground&&e.onDrawBackground(t,this,this.canvas,this.graph_mouse),p||u==LiteGraph.TRANSPARENT_TITLE){const i="dark"==function(e){let t=e.replace("#","");return n=parseInt(t.substring(0,2),16),s=parseInt(t.substring(2,4),16),i=parseInt(t.substring(4,6),16),.299*n+.587*s+.114*i>127.5?"light":"dark";var n,s,i}((null==e?void 0:e.color)||"#ffffff");if(e.onDrawTitleBar)e.onDrawTitleBar(t,l,n,this.ds.scale,s);else if(u!=LiteGraph.TRANSPARENT_TITLE&&(e.constructor.title_color||this.render_title_colored)){let i=e.constructor.title_color||s;if(e.flags.collapsed&&(t.shadowColor=LiteGraph.DEFAULT_SHADOW_COLOR),this.use_gradients){let e=LGraphCanvas.gradients[i];e||(e=LGraphCanvas.gradients[i]=t.createLinearGradient(0,0,400,0),e.addColorStop(0,i),e.addColorStop(1,"#000")),t.fillStyle=e}else t.fillStyle=i;t.beginPath(),d==LiteGraph.BOX_SHAPE||r?t.rect(0,-l,n[0]+1,l):d!=LiteGraph.ROUND_SHAPE&&d!=LiteGraph.CARD_SHAPE||t.roundRect(0,-l,n[0]+1,l,e.flags.collapsed?[this.round_radius]:[this.round_radius,this.round_radius,0,0]),t.fill(),t.shadowColor="transparent"}let a=!1;LiteGraph.node_box_coloured_by_mode&&LiteGraph.NODE_MODES_COLORS[e.mode]&&(a=LiteGraph.NODE_MODES_COLORS[e.mode]),LiteGraph.node_box_coloured_when_on&&(a=e.action_triggered?"#FFF":e.execute_triggered?"#AAA":a);let p=10;if(e.onDrawTitleBox)e.onDrawTitleBox(t,l,n,this.ds.scale);else if(d==LiteGraph.ROUND_SHAPE||d==LiteGraph.CIRCLE_SHAPE||d==LiteGraph.CARD_SHAPE){const n=i?"#ffffff":LiteGraph.NODE_SELECTED_TITLE_COLOR,s=i?"#eeeeee":e.boxcolor||a||LiteGraph.NODE_DEFAULT_BOXCOLOR;t.fillStyle=o?n:s,t.beginPath(),t.fillRect(10,0-1.05*p-1,1.1*p,.125*p),t.fillRect(10,0-1.45*p-1,1.1*p,.125*p),t.fillRect(10,0-1.85*p-1,1.1*p,.125*p)}else t.fillStyle=e.boxcolor||a||LiteGraph.NODE_DEFAULT_BOXCOLOR,t.fillRect(.5*(l-p),-.5*(l+p),p,p);if(t.globalAlpha=h,e.onDrawTitleText&&e.onDrawTitleText(t,l,n,this.ds.scale,this.title_text_font,o),!r){t.font=this.title_text_font;const n=e.getTitle()??`❌ ${e.type}`,s=String(n)+(e.pinned?"📌":"");s&&(t.fillStyle=o?i?"#ffffff":LiteGraph.NODE_SELECTED_TITLE_COLOR:i?"#ffffff":e.constructor.title_text_color||this.node_title_color,e.flags.collapsed?(t.textAlign="left",t.measureText(s),t.fillText(s.substr(0,20),l,LiteGraph.NODE_TITLE_TEXT_Y-l),t.textAlign="left"):(t.textAlign="left",t.fillText(s,l,LiteGraph.NODE_TITLE_TEXT_Y-l)))}if(!A&&e.subgraph&&!e.skip_subgraph_button){let n=LiteGraph.NODE_TITLE_HEIGHT,s=e.size[0]-n,i=LiteGraph.isInsideRectangle(this.graph_mouse[0]-e.pos[0],this.graph_mouse[1]-e.pos[1],s+2,2-n,n-4,n-4);t.fillStyle=i?"#888":"#555",d==LiteGraph.BOX_SHAPE||r?t.fillRect(s+2,2-n,n-4,n-4):(t.beginPath(),t.roundRect(s+2,2-n,n-4,n-4,[4]),t.fill()),t.fillStyle="#333",t.beginPath(),t.moveTo(s+.2*n,.6*-n),t.lineTo(s+.8*n,.6*-n),t.lineTo(s+.5*n,.3*-n),t.fill()}e.onDrawTitle&&e.onDrawTitle(t)}if(o){e.onBounding&&e.onBounding(c),u==LiteGraph.TRANSPARENT_TITLE&&(c[1]-=l,c[3]+=l),t.lineWidth=2,t.globalAlpha=.8,t.beginPath();let i=0,o=0,a=1;d==LiteGraph.BOX_SHAPE?t.rect(i+c[0],i+c[1],o+c[2],o+c[3]):d==LiteGraph.ROUND_SHAPE||d==LiteGraph.CARD_SHAPE&&e.flags.collapsed?t.roundRect(i+c[0],i+c[1],o+c[2],o+c[3],[this.round_radius*a]):d==LiteGraph.CARD_SHAPE?t.roundRect(i+c[0],i+c[1],o+c[2],o+c[3],[this.round_radius*a,a,this.round_radius*a,a]):d==LiteGraph.CIRCLE_SHAPE&&t.arc(.5*n[0],.5*n[1],.5*n[0]+6,0,2*Math.PI),t.strokeStyle=LiteGraph.NODE_BOX_OUTLINE_COLOR,t.stroke(),t.strokeStyle=s,t.globalAlpha=1}e.execute_triggered>0&&e.execute_triggered--,e.action_triggered>0&&e.action_triggered--}function de(e,t,n,s){var i,o;if(!e.widgets||!e.widgets.length)return 0;let a=e.size[0],l=(e.size[1],e.widgets);t+=2;let r=LiteGraph.NODE_WIDGET_HEIGHT,A=this.ds.scale>.5;n.save(),n.globalAlpha=this.editor_alpha;let d=LiteGraph.WIDGET_OUTLINE_COLOR,u=LiteGraph.WIDGET_BGCOLOR,p=LiteGraph.WIDGET_TEXT_COLOR,c=LiteGraph.WIDGET_SECONDARY_TEXT_COLOR,h=12;for(let f=0;f<l.length;++f){let g=l[f],y=t;g.y&&(y=g.y),g.last_y=y,n.strokeStyle=d,n.fillStyle=u,n.textAlign="left",n.lineWidth=1,g.disabled&&(n.globalAlpha*=.5);let v=g.width||a;switch(g.height,g.type){case"button":var m=g.options.size||10;n.font=m+"px Inter",n.fillStyle=(null==(i=g.options)?void 0:i.transparent)?"transparent":u,g.clicked&&(n.fillStyle="#AAA",g.clicked=!1,this.dirty_canvas=!0),n.beginPath(),n.roundRect(h,y,v-24,r,[.25*r]),n.fill(),!A||g.disabled||(null==(o=g.options)?void 0:o.transparent)||n.stroke(),A&&(n.textAlign="center",n.fillStyle=p,n.fillText(g.label||g.name,.5*v,y+.7*r));break;case"toggle":if(n.font="10px Inter",n.textAlign="left",n.strokeStyle=d,n.fillStyle=u,n.beginPath(),A?n.roundRect(h,y,v-24,r,[.25*r]):n.rect(h,y,v-24,r),n.fill(),A&&!g.disabled&&n.stroke(),n.fillStyle=g.value?O:d,n.beginPath(),n.arc(v-24,y+.5*r,.25*r,0,2*Math.PI),n.fill(),A){n.fillStyle=c;const e=g.label||g.name;null!=e&&n.fillText(e,1.6*h,y+.7*r),n.font="10px Inter",n.fillStyle=g.value?p:c,n.textAlign="right",n.fillText(g.value?g.options.on||"true":g.options.off||"false",v-35,y+.7*r)}break;case"slider":n.font="10px Inter",n.fillStyle=u,n.strokeStyle=d,n.beginPath(),n.roundRect(h,y,v-24,r,[.25*r]),n.fill(),n.stroke();let t=g.options.max-g.options.min,a=(g.value-g.options.min)/t;if(a<0&&(a=0),a>1&&(a=1),n.fillStyle=g.options.hasOwnProperty("slider_color")?g.options.slider_color:s==g?d:O,n.beginPath(),n.roundRect(h,y,a*(v-24),r,[.25*r]),n.fill(),g.marker){let e=(g.marker-g.options.min)/t;e<0&&(e=0),e>1&&(e=1),n.fillStyle=g.options.hasOwnProperty("marker_color")?g.options.marker_color:"#AA9",n.roundRect(h+e*(v-24),y,2,r,[.25*r])}if(A){n.textAlign="center",n.fillStyle=p;let e=(g.label||g.name)+" : "+Number(g.value).toFixed(null!=g.options.precision?g.options.precision:3);n.fillText(e,.5*v,y+.7*r)}break;case"number":case"combo":if(n.textAlign="left",n.strokeStyle=d,n.fillStyle=u,n.beginPath(),A?n.roundRect(h,y,v-24,r,[.25*r]):n.rect(h,y,v-24,r),n.fill(),A){g.disabled||n.stroke(),n.fillStyle=p,g.disabled||(n.beginPath(),n.moveTo(24,y+6.5),n.lineTo(18,y+.5*r),n.lineTo(24,y+r-6.5),n.fill(),n.beginPath(),n.moveTo(v-h-12,y+6.5),n.lineTo(v-h-6,y+.5*r),n.lineTo(v-h-12,y+r-6.5),n.fill()),n.fillStyle=c,n.font="10px Inter",n.fillText(g.label||g.name,29,y+.7*r),n.fillStyle=p,n.textAlign="right";let e=6;if("number"==g.type)n.font="10px Inter",n.fillText(Number(g.value).toFixed(void 0!==g.options.precision?g.options.precision:3),v-24-e,y+.7*r);else{let t=g.value;if(g.options.values){let e=g.options.values;e.constructor===Function&&(e=e()),e&&e.constructor!==Array&&(t=e[g.value])}const s=v-48-(n.measureText(g.label||g.name).width+24),i=n.measureText(t).width;if(i>s){const e="…",o=n.measureText(e).width,a=n.measureText("a").width;if(s<=o)t="․";else{t=`${t}`;if(i+o-s+3*a>s){const e=s+3*a,n=Math.floor((e-o)/a);t=t.substr(0,n)}for(;n.measureText(t).width+o>s;)t=t.substr(0,t.length-1);t+=e}}n.fillText(t,v-24-e,y+.7*r)}}break;case"string":case"text":if(n.textAlign="left",n.strokeStyle=d,n.fillStyle=u,n.beginPath(),A?n.roundRect(h,y,v-24,r,[.25*r]):n.rect(h,y,v-24,r),n.fill(),A){g.disabled||n.stroke(),n.save(),n.beginPath(),n.rect(h,y,v-24,r),n.clip(),n.fillStyle=c;const e=g.label||g.name;n.font="10px Inter",null!=e&&n.fillText(e,24,y+.7*r),n.fillStyle=p,n.textAlign="right",n.fillText(String(g.value).substr(0,30),v-24,y+.7*r),n.restore()}break;default:g.draw&&g.draw(n,e,v,y,r)}t+=(g.computeSize?g.computeSize(v)[1]:r)+4,n.globalAlpha=this.editor_alpha}n.restore(),n.textAlign="left"}function ue(e,t,n,s,i){return new LiteGraph.ContextMenu(LiteGraph.NODE_MODES,{event:n,callback:function(e){if(!i)return;var t=Object.values(LiteGraph.NODE_MODES).indexOf(e),n=function(e){t>=0&&LiteGraph.NODE_MODES[t]?e.changeMode(t):e.changeMode(LiteGraph.ALWAYS),$||($=Q()),$.update()},s=LGraphCanvas.active_canvas;if(!s.selected_nodes||Object.keys(s.selected_nodes).length<=1)n(i);else for(var o in s.selected_nodes)n(s.selected_nodes[o])},parentMenu:s,node:i}),!1}function pe(e,t,n,s,i){if(!i)throw"no node for color";var o=[];for(var a in o.push({value:null,content:"<span style='display: block; padding-left: 4px;'>No color</span>"}),LGraphCanvas.node_colors){var l=LGraphCanvas.node_colors[a];e={value:a,content:"<span style='display: block; color: #999; padding-left: 4px; border-left: 8px solid "+l.color+"; background-color:"+l.bgcolor+"'>"+a+"</span>"};o.push(e)}return new LiteGraph.ContextMenu(o,{event:n,callback:function(e){if(!i)return;var t=e.value?LGraphCanvas.node_colors[e.value]:null,n=function(e){t?e.constructor===LiteGraph.LGraphGroup?e.color=t.groupcolor:(e.color=t.color,e.bgcolor=t.bgcolor):(delete e.color,delete e.bgcolor),$||($=Q()),$.update()},s=LGraphCanvas.active_canvas;if(!s.selected_nodes||Object.keys(s.selected_nodes).length<=1)n(i);else for(var o in s.selected_nodes)n(s.selected_nodes[o]);i.setDirtyCanvas(!0,!0)},parentMenu:s,node:i}),!1}function ce(e,t,n,s,i){var o=e.property||"title",a=i[o],l=document.createElement("div");l.is_modified=!1,l.className="graphdialog",l.innerHTML="<span class='name'></span><input autofocus type='text' class='value'/><button>OK</button>",l.close=function(){l.parentNode&&l.parentNode.removeChild(l)},l.querySelector(".name").innerText=o;var r=l.querySelector(".value");r&&(r.value=a,r.addEventListener("blur",(function(e){this.focus()})),r.addEventListener("keydown",(function(e){if(l.is_modified=!0,27==e.keyCode)l.close();else if(13==e.keyCode)h();else if(13!=e.keyCode&&"textarea"!=e.target.localName)return;e.preventDefault(),e.stopPropagation()})));var A=LGraphCanvas.active_canvas.canvas,d=A.getBoundingClientRect(),u=-20,p=-20;d&&(u-=d.left,p-=d.top),event?(l.style.left=event.clientX+u+"px",l.style.top=event.clientY+p+"px"):(l.style.left=.5*A.width+u+"px",l.style.top=.5*A.height+p+"px"),l.querySelector("button").addEventListener("click",h),A.parentNode.appendChild(l),r&&r.focus();var c=null;function h(){r&&function(t){"Number"==e.type?t=Number(t):"Boolean"==e.type&&(t=Boolean(t));i[o]=t,l.parentNode&&l.parentNode.removeChild(l);i.setDirtyCanvas(!0,!0),$||($=Q());$.update()}(r.value)}l.addEventListener("mouseleave",(function(e){LiteGraph.dialog_close_on_mouse_leave&&!l.is_modified&&LiteGraph.dialog_close_on_mouse_leave&&(c=setTimeout(l.close,LiteGraph.dialog_close_on_mouse_leave_delay))})),l.addEventListener("mouseenter",(function(e){LiteGraph.dialog_close_on_mouse_leave&&c&&clearTimeout(c)}))}(e=>{try{v.registerExtension(e)}catch(t){}})({name:"Comfy.EasyUse.UI",init(){var e,t;const n="Comfy.CustomColorPalettes",s="Comfy.Settings.Comfy.CustomColorPalettes";if(ie||(ie=x(n,s)),oe||(oe=x("Comfy.ColorPalette","Comfy.Settings.Comfy.ColorPalette")||"dark"),(!(null==(e=null==ie?void 0:ie.obsidian)?void 0:e.version)||ie.obsidian.version<V.ColorPalette.version)&&(ie.obsidian=V.ColorPalette,ie.obsidian_dark=U.ColorPalette,C(n,ie,s)),(!ie||!(null==(t=null==ie?void 0:ie.milk_white)?void 0:t.version)||ie.milk_white.version<F.ColorPalette.version)&&(ie.milk_white=F.ColorPalette,C(n,ie,s)),ee.includes(oe)){switch(document.body.classList+=" comfyui-easyuse",function(e,t=!1){const n=document.createElement("link");n.rel="preconnect",n.href=e,t&&(n.crossorigin=""),document.head.appendChild(n)}("https://fonts.googleapis.com",!0),function(e,t=!0,n="ComfyUI-Easy-Use"){const s=document.createElement("link");s.rel="stylesheet",s.type="text/css",s.href=t?`extensions/${n}/${e}`:e,document.head.appendChild(s)}("https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700&amp;family=JetBrains+Mono&amp;display=swap",!1),oe){case"obsidian":case"obsidian_dark":case"custom_obsidian":case"custom_obsidian_dark":case"dark":LGraphCanvas.node_colors=V.NODE_COLORS;break;case"custom_milk_white":case"milk_white":case"light":LGraphCanvas.node_colors=F.NODE_COLORS}ne=LGraphCanvas.node_colors,LiteGraph.NODE_TEXT_SIZE=13,LGraphCanvas.prototype.drawNodeShape=Ae,LGraphCanvas.prototype.drawNodeWidgets=de}else document.body.classList.remove("comfyui-easyuse");LGraphCanvas.onMenuNodeMode=ue,LGraphCanvas.onMenuNodeColors=pe,LGraphCanvas.onShowPropertyEditor=ce},async setup(){var e;Object.assign(v.canvas.default_connection_color_byType,R),Object.assign(LGraphCanvas.link_type_colors,R),"custom_milk_white"==oe&&document.body.classList.remove(I),v.ui.settings.addEventListener("Comfy.ColorPalette.change",(async({detail:e})=>{(null==e?void 0:e.value)&&(null==e?void 0:e.oldValue)&&(await K(1),Object.assign(v.canvas.default_connection_color_byType,R),Object.assign(LGraphCanvas.link_type_colors,R)),"custom_milk_white"==e.value&&document.body.classList.remove(I)})),setTimeout((e=>he(x("Comfy.UseNewMenu")||"Disabled")),1);const t=null==(e=v.ui.settings.settingsLookup)?void 0:e["Comfy.UseNewMenu"];t&&(t.onChange=e=>he(e))},async nodeCreated(e){var t;if(te.hasOwnProperty(e.comfyClass)){const t=te[e.comfyClass],n=ne[t];if(!n)return;n.color&&(e.color=n.color),n.bgcolor&&(e.bgcolor=n.bgcolor)}if(se||(se=x("Comfy.WidgetControlMode")),"before"==se){const n="before"==se;if((null==(t=e.widgets)?void 0:t.length)>0)for(const t of e.widgets)if(["control_before_generate","control_after_generate"].includes(t.name)&&(await re(t,n),t.linkedWidgets))for(const e of t.linkedWidgets)await re(e,n)}}});const he=e=>{var t;const n=(null==(t=document.getElementById("crystools-root"))?void 0:t.children)||null,s=x("Comfy.Workflow.WorkflowTabsPosition",null);if((null==n?void 0:n.length)>0&&s)if(ae||(ae=document.getElementById("MonitorUI")),"Disabled"==e){document.getElementById("crystools-root").appendChild(ae)}else{let e=document.getElementById("crystools-root-easyuse");if(e)e.appendChild(ae);else{const e=document.getElementsByClassName("comfyui-menu-right");e.length>0&&e[0].before(_("div",{id:"crystools-root-easyuse"},ae))}}};let me={};const fe=(e,t)=>e.widgets.find((e=>e.name===t)),ge=(e,t,n=!1,s="")=>{var i;if(!t||((e,t)=>!!e.inputs&&e.inputs.some((e=>e.name===t)))(e,t.name))return;me[t.name]||(me[t.name]={origType:t.type,origComputeSize:t.computeSize});const o=e.size;t.type=n?me[t.name].origType:"easyHidden"+s,t.computeSize=n?me[t.name].origComputeSize:()=>[0,-4],null==(i=t.linkedWidgets)||i.forEach((s=>ge(e,s,":"+t.name,n)));const a=n?Math.max(e.computeSize()[1],o[1]):e.size[1];e.setSize([e.size[0],a])},ye=(e,t=0)=>{var n,s;if(e)return(null==(n=e.widgets)?void 0:n[t])?e.widgets[t].value:e.widgets_values?null==(s=e.widgets_values)?void 0:s[t]:void 0},ve=e=>e.setSize([e.size[0],e.computeSize()[1]]),be=(e,t)=>graph.getNodeById(e),_e=e=>{var t;try{return Object.values(null==(t=null==graph?void 0:graph.list_of_graphcanvas[0])?void 0:t.selected_nodes)}catch(n){return[]}};function Le(e,t,n){return e+(s=n,(.5-.5*Math.cos(Math.PI*s))*(t-e));var s}const we=(e,t=!0)=>{var n,s;const i=(null==(s=null==(n=e.graph)?void 0:n.list_of_graphcanvas)?void 0:s[0])||null;if(!i)return;const[o,a]=e.pos,[l,r]=e.size;(([e,t],n)=>{const s=n.ds,i=document.body.clientWidth,o=document.body.clientHeight,a=s.scale,l=.5*i/a-e,r=.5*o/a-t,A=Date.now()+250,d=s.offset[0],u=s.offset[1],p=()=>{const e=A-Date.now();if(!(Date.now()<A))return s.offset[0]=l,s.offset[1]=r,void n.setDirty(!0,!0);requestAnimationFrame(p);const t=1-e/250;s.offset[0]=Le(d,l,t),s.offset[1]=Le(u,r,t),n.setDirty(!0,!0)};requestAnimationFrame(p)})([o+l/2,a+r/2],i),t&&i.selectNode(e)},Se=e=>{const t=be(e);t&&we(t)},Ee=(e,t=(()=>graph.links??[])())=>t[e],ke=e=>e.toLowerCase().replace(/_./g,(e=>e.replace("_","").toUpperCase())),xe=e=>"easy getNode"===e.type,Ne=e=>"easy setNode"===e.type,Ce=e=>xe(e)||Ne(e),Te=(e=(()=>graph._nodes??[])())=>e.filter((e=>Ce(e)));let Ie={},Oe={};const Re=(e,t,n=0)=>{e.widgets_values||(e.widgets_values=[]),e.widgets_values[n]=t,e.widgets[n].value=t},De=e=>graph.add(e),Me=e=>graph.remove(e),Pe=(e,t=0)=>{var n,s;if("Reroute"!==e.type)return[e,t];const i=e,o=null==(s=null==(n=i.inputs)?void 0:n[0])?void 0:s.link;if(!o)return[i,t];const a=Ee(o);if(!a)return[i,t];const l=be(a.origin_id);return l?(setTimeout((()=>{Me(i)})),Pe(l,a.origin_slot)):[i,t]},Ge=e=>{var t,n,s;if("Reroute"!==e.type)return e;const i=e,o=null==(n=null==(t=i.outputs)?void 0:t[0])?void 0:n.links;if(!o)return i;const a=o[0];if(!a)return i;const l=Ee(a);if(!l)return i;const r=be(l.target_id);return r?(1===(null==(s=i.outputs[0].links)?void 0:s.length)&&setTimeout((()=>{Me(i)})),Ge(r)):i},ze=(e,t="width")=>{var n;const s=e[0],i="width"==t?0:1,o=null==(n=s.size)?void 0:n[i];o&&(e.forEach((e=>{e.size[i]=o})),LGraphCanvas.active_canvas.setDirty(!0,!0))},je=(e,t="horizontal")=>{if(e.length<3)return;const n="horizontal"===t?0:1;e.sort(((e,t)=>e.pos[n]-t.pos[n]));const s=Math.min(...e.map((e=>e.pos[n]))),i=(Math.max(...e.map((e=>e.pos[n]+e.size[n])))-s-e.reduce(((e,t)=>e+t.size[n]),0))/(e.length-1);let o=s;e.forEach((e=>{e.pos[n]=o,o+=e.size[n]+i})),LGraphCanvas.active_canvas.setDirty(!0,!0)};const Ve=new class{constructor(){m(this,"element",_(`div.${T}toast`)),m(this,"children",HTMLElement),m(this,"container",document.body),this.container.appendChild(this.element)}async show(e){let t=_(`div.${T}toast-container`,[_("div",[_("span",[...e.icon?[_("i",{className:e.icon})]:[],_("span",e.content)])])]);t.setAttribute("toast-id",e.id),this.element.replaceChildren(t),this.container.appendChild(this.element),await K(64),t.style.marginTop=`-${t.offsetHeight}px`,await K(64),t.classList.add("show"),e.duration&&(await K(e.duration),this.hide(e.id))}async hide(e){const t=document.querySelector(`.${T}toast > [toast-id="${e}"]`);(null==t?void 0:t.classList.contains("show"))&&(t.classList.remove("show"),await K(750)),t&&t.remove()}async clearAllMessages(){let e=document.querySelector(`.${T}container`);e&&(e.innerHTML="")}async info(e,t=3e3,n=[]){this.show({id:"toast-info",icon:`mdi mdi-information ${T}theme`,content:e,duration:t})}async success(e,t=3e3){this.show({id:"toast-success",icon:`mdi mdi-check-circle ${T}success`,content:e,duration:t})}async error(e,t=3e3){this.show({id:"toast-error",icon:`mdi mdi-close-circle ${T}error`,content:e,duration:t})}async warn(e,t=3e3){this.show({id:"toast-warn",icon:`mdi mdi-alert-circle ${T}warning`,content:e,duration:t})}async showLoading(e,t=0){this.show({id:"toast-loading",icon:"mdi mdi-rotate-right loading",content:e,duration:t})}async hideLoading(){this.hide("toast-loading")}},Ue=["rescale_after_model","rescale","lora_name","upscale_method","image_output","add_noise","info","sampler_name","ckpt_B_name","ckpt_C_name","save_model","refiner_ckpt_name","num_loras","num_controlnet","mode","toggle","resolution","ratio","target_parameter","input_count","replace_count","downscale_mode","range_mode","text_combine_mode","input_mode","lora_count","ckpt_count","conditioning_mode","preset","use_tiled","use_batch","num_embeds","easing_mode","guider","scheduler","inpaint_mode","t5_type","rem_mode","encode"],We=["LIGHT - SD1.5 only (low strength)","STANDARD (medium strength)","VIT-G (medium strength)","REGULAR - FLUX and SD3.5 only (high strength)","PLUS (high strength)","PLUS (kolors genernal)","PLUS FACE (portraits)","FULL FACE - SD1.5 only (portraits stronger)","COMPOSITION"],Fe=["FACEID","FACEID PLUS - SD1.5 only","FACEID PLUS V2","FACEID PLUS KOLORS","FACEID PORTRAIT (style transfer)","FACEID PORTRAIT UNNORM - SDXL only (strong)"],Xe=["easy seed","easy latentNoisy","easy wildcards","easy preSampling","easy preSamplingAdvanced","easy preSamplingNoiseIn","easy preSamplingSdTurbo","easy preSamplingCascade","easy preSamplingDynamicCFG","easy preSamplingLayerDiffusion","easy fullkSampler","easy fullCascadeKSampler"],Ze=["easy fullLoader","easy a1111Loader","easy comfyLoader","easy hyditLoader","easy pixArtLoader"],qe=["easy imageSize","easy imageSizeBySide","easy imageSizeByLongerSide","easy imageSizeShow","easy imageRatio","easy imagePixelPerfect"],He=["easy forLoopStart","easy forLoopEnd","easy whileLoopStart","easy whileLoopEnd"],Ke=["easy anythingIndexSwitch","easy imageIndexSwitch","easy textIndexSwitch","easy conditioningIndexSwitch"],Ye=["easy anythingInversedSwitch"],Je=["easy loadImagesForLoop",...He,...Ke,...Ye],Be={"easy anythingInversedSwitch":"out","easy anythingIndexSwitch":"value","easy imageIndexSwitch":"image","easy textIndexSwitch":"text","easy conditioningIndexSwitch":"cond"};let Qe=null;function $e(e,t){const n=e.comfyClass;let s=t.value;switch(t.name){case"range_mode":ge(e,fe(e,"step"),"step"==s),ge(e,fe(e,"num_steps"),"num_steps"==s),ve(e);break;case"text_combine_mode":ge(e,fe(e,"replace_text"),"replace"==s);break;case"lora_name":["lora_model_strength","lora_clip_strength"].map((t=>ge(e,fe(e,t),"None"!==s)));break;case"resolution":"自定义 x 自定义"===s&&(t.value="width x height (custom)"),["empty_latent_width","empty_latent_height","width","height"].map((t=>ge(e,fe(e,t),"width x height (custom)"===s)));break;case"ratio":["empty_latent_width","empty_latent_height"].map((t=>ge(e,fe(e,t),"custom"===s)));break;case"num_loras":var i=s+1,o=fe(e,"mode").value;for(let t=0;t<i;t++)ge(e,fe(e,"lora_"+t+"_name"),!0),ge(e,fe(e,"lora_"+t+"_strength"),"simple"===o),["lora_"+t+"_model_strength","lora_"+t+"_clip_strength"].map((t=>ge(e,fe(e,t),"simple"!==o)));for(let t=i;t<21;t++)["lora_"+t+"_name","lora_"+t+"_strength","lora_"+t+"_model_strength","lora_"+t+"_clip_strength"].map((t=>ge(e,fe(e,t),!1)));ve(e);break;case"num_controlnet":i=s+1,o=fe(e,"mode").value;for(let t=0;t<i;t++)["controlnet_"+t,"controlnet_"+t+"_strength","scale_soft_weight_"+t].map((t=>ge(e,fe(e,t),!0))),["start_percent_"+t,"end_percent_"+t].map((t=>ge(e,fe(e,t),"simple"!==o)));for(let t=i;t<21;t++)["controlnet_"+t,"controlnet_"+t+"_strength","scale_soft_weight_"+t,"start_percent_"+t,"end_percent_"+t].map((t=>ge(e,fe(e,t),!1)));ve(e);break;case"mode":switch(null==e?void 0:e.comfyClass){case"easy loraStack":i=fe(e,"num_loras").value+1,o=s;for(let t=0;t<i;t++)ge(e,fe(e,"lora_"+t+"_strength"),"simple"===o),["lora_"+t+"_model_strength","lora_"+t+"_clip_strength"].map((t=>ge(e,fe(e,t),"simple"!==o)));ve(e);break;case"easy controlnetStack":i=fe(e,"num_controlnet").value+1,o=s;for(let t=0;t<i;t++)["start_percent_"+t,"end_percent_"+t].map((t=>ge(e,fe(e,t),"simple"!==o)));ve(e);break;case"easy icLightApply":o=s;["lighting","remove_bg"].map((t=>ge(e,fe(e,t),"Foreground"===o))),ge(e,fe(e,"source"),"Foreground"!==o),ve(e)}break;case"toggle":t.type="toggle",t.options={on:"Enabled",off:"Disabled"};break;case"t5_type":["clip_name","padding"].map((t=>ge(e,fe(e,t),"sd3"==s))),["t5_name","device","dtype"].map((t=>ge(e,fe(e,t),"t5v11"==s))),ve(e);break;case"preset":if("FLUX.1-dev"==s&&(t.value="REGULAR - FLUX and SD3.5 only (high strength)"),We.includes(s)){let t=fe(e,"use_tiled");ge(e,fe(e,"lora_strength")),ge(e,fe(e,"provider"),!!["REGULAR - FLUX and SD3.5 only (high strength)"].includes(s)),ge(e,fe(e,"weight_faceidv2")),ge(e,fe(e,"weight_kolors")),ge(e,fe(e,"use_tiled"),!0),ge(e,fe(e,"sharpening"),t&&t.value)}else Fe.includes(s)&&(ge(e,fe(e,"weight_faceidv2"),!!["FACEID PLUS V2","FACEID PLUS KOLORS"].includes(s)),ge(e,fe(e,"weight_kolors"),!!["FACEID PLUS KOLORS"].includes(t.value)),["FACEID PLUS KOLORS","FACEID PORTRAIT (style transfer)","FACEID PORTRAIT UNNORM - SDXL only (strong)"].includes(s)?ge(e,fe(e,"lora_strength"),!1):ge(e,fe(e,"lora_strength"),!0),ge(e,fe(e,"provider"),!0),ge(e,fe(e,"use_tiled")),ge(e,fe(e,"sharpening")));ve(e);break;case"use_tiled":ge(e,fe(e,"sharpening"),!!s),ve(e);break;case"num_embeds":i=s+1;for(let t=0;t<i;t++)ge(e,fe(e,"weight"+t),!0);for(let t=i;t<6;t++)ge(e,fe(e,"weight"+t));ve(e);break;case"inpaint_mode":switch(s){case"normal":case"fooocus_inpaint":["dtype","fitting","function","scale","start_at","end_at"].map((t=>ge(e,fe(e,t),!1)));break;case"brushnet_random":case"brushnet_segmentation":["dtype","scale","start_at","end_at"].map((t=>ge(e,fe(e,t),!0))),["fitting","function"].map((t=>ge(e,fe(e,t),!1)));break;case"powerpaint":["dtype","fitting","function","scale","start_at","end_at"].map((t=>ge(e,fe(e,t),!0)))}ve(e);break;case"encode":ge(e,fe(e,"noise_mask"),!!["inpaint_model_conditioning","different_diffusion"].includes(s)),ve(e);break;case"image_output":ge(e,fe(e,"link_id"),!!["Sender","Sender&Save"].includes(s)),ge(e,fe(e,"decode_vae_name"),!!["Hide","Hide&Save"].includes(s)),["save_prefix","output_path","embed_workflow","number_padding","overwrite_existing"].map((t=>ge(e,fe(e,t),!!["Save","Hide&Save","Sender&Save"].includes(s))));break;case"add_noise":var a=fe(e,"control_before_generate"),l=fe(e,"control_after_generate")||a;"disable"===s?(ge(e,fe(e,"seed")),l&&(l.last_value=l.value,l.value="fixed",ge(e,l))):("enable"===s&&(t.value="enable (CPU)"),ge(e,fe(e,"seed"),!0),l&&((null==l?void 0:l.last_value)&&(l.value=l.last_value),ge(e,l,!0))),ve(e);break;case"guider":switch(s){case"Basic":case"IP2P+Basic":["cfg_negative"].map((t=>ge(e,fe(e,t))));break;case"CFG":case"IP2P+CFG":ge(e,fe(e,"cfg"),!0),ge(e,fe(e,"cfg_negative"));break;case"DualCFG":case"IP2P+DualCFG":["cfg","cfg_negative"].map((t=>ge(e,fe(e,t),!0)))}ve(e);break;case"scheduler":["karrasADV","exponentialADV","polyExponential"].includes(s)?(["sigma_max","sigma_min"].map((t=>ge(e,fe(e,t),!0))),["denoise","beta_d","beta_min","eps_s","coeff"].map((t=>ge(e,fe(e,t))),!1),ge(e,fe(e,"rho"),"exponentialADV"!=s)):"vp"==s?(["sigma_max","sigma_min","denoise","rho","coeff"].map((t=>ge(e,fe(e,t)))),["beta_d","beta_min","eps_s"].map((t=>ge(e,fe(e,t),!0)))):(["sigma_max","sigma_min","beta_d","beta_min","eps_s","rho"].map((t=>ge(e,fe(e,t)))),ge(e,fe(e,"coeff"),"gits"==s),ge(e,fe(e,"denoise"),!0)),ve(e);break;case"conditioning_mode":["replace","concat","combine"].includes(s)?["average_strength","old_cond_start","old_cond_end","new_cond_start","new_cond_end"].map((t=>ge(e,fe(e,t)))):"average"==s?(ge(e,fe(e,"average_strength"),!0),["old_cond_start","old_cond_end","new_cond_start","new_cond_end"].map((t=>ge(e,fe(e,t),!1)))):"timestep"==s&&(["average_strength"].map((t=>ge(e,fe(e,t),!1))),["old_cond_start","old_cond_end","new_cond_start","new_cond_end"].map((t=>ge(e,fe(e,t),!0))));break;case"rescale":fe(e,"rescale_after_model").value,ge(e,fe(e,"width"),"to Width/Height"===s),ge(e,fe(e,"height"),"to Width/Height"===s),ge(e,fe(e,"percent"),"by percentage"===s),ge(e,fe(e,"longer_side"),"to longer side - maintain aspect"===s),ve(e);break;case"upscale_method":["factor","crop"].map((t=>ge(e,fe(e,t),"None"!==s)));break;case"target_parameter":switch(n){case"easy XYInputs: Steps":["first_step","last_step"].map((t=>ge(e,fe(e,t),"steps"==s))),["first_start_step","last_start_step"].map((t=>ge(e,fe(e,t),"start_at_step"==s))),["first_end_step","last_end_step"].map((t=>ge(e,fe(e,t),"end_at_step"==s)));break;case"easy XYInputs: Sampler/Scheduler":let t=fe(e,"input_count").value+1;for(let n=0;n<t;n++)ge(e,fe(e,"sampler_"+n),"scheduler"!==s),ge(e,fe(e,"scheduler_"+n),"sampler"!==s);ve(e);break;case"easy XYInputs: ControlNet":["first_strength","last_strength"].map((t=>ge(e,fe(e,t),"strength"==s))),["first_start_percent","last_start_percent"].map((t=>ge(e,fe(e,t),"start_percent"==s))),["first_end_percent","last_end_percent"].map((t=>ge(e,fe(e,t),"end_percent"==s))),["strength","start_percent","end_percent"].map((t=>ge(e,fe(e,t),s!=t))),ve(e)}case"replace_count":i=s+1;for(let t=0;t<i;t++)ge(e,fe(e,"replace_"+t),!0);for(let t=i;t<31;t++)ge(e,fe(e,"replace_"+t));ve(e);break;case"lora_count":i=s+1;var r=-1==fe(e,"input_mode").value.indexOf("Weights");for(let t=0;t<i;t++)ge(e,fe(e,"lora_name_"+t),!0),["model_str_"+t,"clip_str_"+t].map((t=>ge(e,fe(e,t),!r)));for(let t=i;t<11;t++)["lora_name_"+t,"model_str_"+t,"clip_str_"+t].map((t=>ge(e,fe(e,t),!1)));ve(e);break;case"ckpt_count":i=s+1;var A=-1!=fe(e,"input_mode").value.indexOf("ClipSkip"),d=-1!=fe(e,"input_mode").value.indexOf("VAE");for(let t=0;t<i;t++)ge(e,fe(e,"ckpt_name_"+t),!0),ge(e,fe(e,"clip_skip_"+t),!!A),ge(e,fe(e,"vae_name_"+t),!!d);for(let t=i;t<11;t++)["ckpt_name_"+t,"clip_skip_"+t,"vae_name_"+t].map((t=>ge(e,fe(e,t),!1)));ve(e);break;case"input_count":i=s+1;var u=fe(e,"target_parameter").value;for(let t=0;t<i;t++)ge(e,fe(e,"sampler_"+t),"scheduler"!==u),ge(e,fe(e,"scheduler_"+t),"sampler"!==u);for(let t=i;t<31;t++)ge(e,fe(e,"sampler_"+t)),ge(e,fe(e,"scheduler_"+t));ve(e);break;case"input_mode":switch(n){case"easy XYInputs: Lora":i=fe(e,"lora_count").value+1;const t=-1!=s.indexOf("Weights");for(let n=0;n<i;n++)ge(e,fe(e,"lora_name_"+n),!0),["model_str_"+n,"clip_str_"+n].map((n=>ge(e,fe(e,n),!!t)));["model_strength","clip_strength"].map((n=>ge(e,fe(e,n),!t)));break;case"easy XYInputs: Checkpoint":i=fe(e,"ckpt_count").value+1,A=-1!=fe(e,"input_mode").value.indexOf("ClipSkip"),d=-1!=fe(e,"input_mode").value.indexOf("VAE");for(let n=0;n<i;n++)ge(e,fe(e,"ckpt_name_"+n),!0),ge(e,fe(e,"clip_skip_"+n),!!A),ge(e,fe(e,"vae_name_"+n),!!d)}ve(e);break;case"rem_mode":ge(e,fe(e,"torchscript_jit"),"Inspyrenet"===s),ve(e)}}v.registerExtension({name:"Comfy.EasyUse.Widget",async beforeRegisterNodeDef(e,t,n){const s=t.name,i=e.prototype.onAdded,o=e.prototype.onNodeCreated,a=e.prototype.onConfigure,l=e.prototype.onExecuted,r=e.prototype.onConnectionsChange;if(["easy showAnything","easy showAnythingLazy","easy showTensorShape","easy showSpentTime","easy imageInterrogator","easy showLoaderSettingsNames"].includes(s)){let i=function(e,t="text"){var s,i;if(this.widgets){const e=this.widgets.findIndex((e=>e.name===t));if(-1!==e){for(let t=e;t<this.widgets.length;t++)null==(i=(s=this.widgets[t]).onRemove)||i.call(s);this.widgets.length=e}}for(const o of e){const e=w.STRING(this,"text",["STRING",{multiline:!0}],n).widget;e.inputEl.readOnly=!0,e.inputEl.style.opacity=.6,e.value=o}requestAnimationFrame((()=>{var e;const t=this.computeSize();t[0]<this.size[0]&&(t[0]=this.size[0]),t[1]<this.size[1]&&(t[1]=this.size[1]),null==(e=this.onResize)||e.call(this,t),n.graph.setDirtyCanvas(!0,!1)}))};e.prototype.onExecuted=function(e){null==l||l.apply(this,arguments),i.call(this,e.text,"text")},["easy imageInterrogator"].includes(t.name)||(e.prototype.onConfigure=function(){var e;null==a||a.apply(this,arguments);let t="text";switch(s){case"easy showLoaderSettingsNames":t="names";break;case"easy showSpentTime":t="spent_time";break;default:t="text"}(null==(e=this.widgets_values)?void 0:e.length)&&i.call(this,this.widgets_values,t)})}if(qe.includes(s)){let t=function(e){var t="";for(let n=0;n<e.length;n++)t+=e[n];if(this.widgets){const e=this.widgets.findIndex((e=>"info"===e.name));if(-1!==e&&this.widgets[e]){this.widgets[e].value=t}}requestAnimationFrame((()=>{var e;const t=this.computeSize();t[0]<this.size[0]&&(t[0]=this.size[0]),t[1]<this.size[1]&&(t[1]=this.size[1]),null==(e=this.onResize)||e.call(this,t),n.graph.setDirtyCanvas(!0,!1)}))};e.prototype.onExecuted=function(e){null==l||l.apply(this,arguments),t.call(this,e.text)}}if("easy promptLine"==s&&(e.prototype.onAdded=async function(){i&&i.apply(this,[]);let e=this.widgets.find((e=>"prompt"==e.name));this.addWidget("button","get values from COMBO link","",(()=>{var t,s;const i=(null==(s=null==(t=this.outputs[1])?void 0:t.links)?void 0:s.length)>0?this.outputs[1].links[0]:null,o=n.graph._nodes.find((e=>{var t;return null==(t=e.inputs)?void 0:t.find((e=>e.link==i))}));if(i&&o){const t=o.inputs.find((e=>e.link==i)).widget.name,n=o.widgets.find((e=>e.name==t));let s=(null==n?void 0:n.options.values)||null;s&&(s=s.join("\n"),e.value=s)}else Ve.error(q("No COMBO link"),3e3)}),{serialize:!1})}),Ze.includes(t.name)){let t=function(e){var t="";for(let n=0;n<e.length;n++)t+=e[n];return t},n=function(e,t="positive"){if(this.widgets){const n=this.widgets.findIndex((e=>e.name===t+"_prompt")),s="comfy-multiline-input wildcard_"+t+"_"+this.id.toString();if(-1==n&&e){const n=document.createElement("textarea");n.className=s,n.placeholder="Wildcard Prompt ("+t+")";const i=this.addDOMWidget(t+"_prompt","customtext",n,{getValue:e=>n.value,setValue(e){n.value=e},serialize:!1});i.inputEl=n,i.inputEl.readOnly=!0,n.addEventListener("input",(()=>{var e;null==(e=i.callback)||e.call(i,i.value)})),i.value=e}else if(this.widgets[n])if(e){this.widgets[n].value=e}else{this.widgets.splice(n,1);const e=document.getElementsByClassName(s);e&&e[0]&&e[0].remove()}}};e.prototype.onExecuted=function(e){null==l||l.apply(this,arguments);const s=t(e.positive),i=t(e.negative);n.call(this,s,"positive"),n.call(this,i,"negative")}}if(["easy sv3dLoader"].includes(t.name)){let t=function(e,t,n){switch(e){case"azimuth":return n.readOnly=!0,n.style.opacity=.6,"0:(0.0,0.0)"+(t>1?`\n${t-1}:(360.0,0.0)`:"");case"elevation":return n.readOnly=!0,n.style.opacity=.6,"0:(-90.0,0.0)"+(t>1?`\n${t-1}:(90.0,0.0)`:"");case"custom":return n.readOnly=!1,n.style.opacity=1,"0:(0.0,0.0)\n9:(180.0,0.0)\n20:(360.0,0.0)"}};e.prototype.onNodeCreated=async function(){o&&o.apply(this,[]);const e=this.widgets.find((e=>"easing_mode"==e.name)),n=this.widgets.find((e=>"batch_size"==e.name)),s=this.widgets.find((e=>"scheduler"==e.name));setTimeout((i=>{s.value||(s.value=t(e.value,n.value,s.inputEl))}),1),e.callback=e=>{s.value=t(e,n.value,s.inputEl)},n.callback=n=>{s.value=t(e.value,n,s.inputEl)}}}if(Xe.includes(s)&&(e.prototype.onNodeCreated=async function(){o&&o.apply(this,[]);const e=this.widgets.find((e=>["seed_num","seed"].includes(e.name))),s=this.widgets.find((e=>["control_before_generate","control_after_generate"].includes(e.name)));if("easy seed"==t.name){const t=this.addWidget("button","🎲 Manual Random Seed",null,(t=>{"fixed"!=s.value&&(s.value="fixed"),e.value=Math.floor(Math.random()*D),n.queuePrompt(0,1)}),{serialize:!1});e.linkedWidgets=[t,s]}},e.prototype.onAdded=async function(){i&&i.apply(this,[]);const e=this.widgets.find((e=>["seed_num","seed"].includes(e.name))),t=this.widgets.find((e=>["control_before_generate","control_after_generate"].includes(e.name)));setTimeout((n=>{"control_before_generate"==t.name&&0===e.value&&(e.value=Math.floor(Math.random()*D))}),1)}),"easy convertAnything"==s&&(e.prototype.onNodeCreated=async function(){o&&o.apply(this,[]);const e=this.widgets.find((e=>"output_type"==e.name)),t=t=>{this.outputs[0].type=e.value.toUpperCase(),this.outputs[0].name=e.value,this.outputs[0].label=e.value};setTimeout((e=>t()),10),e.callback=e=>t()}),"easy imageInsetCrop"==s){let t=function(e){const t=e.widgets[0];for(let n=1;n<=4;n++)"Pixels"===t.value?(e.widgets[n].options.step=80,e.widgets[n].options.max=8192):(e.widgets[n].options.step=10,e.widgets[n].options.max=99)};e.prototype.onAdded=async function(e){const n=this.widgets[0];let s=n.callback;n.callback=(...e)=>{t(this),s&&s.apply(n,[...e])},setTimeout((e=>{t(this)}),1)}}if(Je.includes(s)){const t=e=>{switch(s){case"easy forLoopStart":return 0;case"easy forLoopEnd":return 1}},n=e=>{switch(s){case"easy forLoopStart":return 2;case"easy forLoopEnd":return 0}};e.prototype.onNodeCreated=async function(){if("easy loadImagesForLoop"==s&&(this.outputs[0].shape=5),He.includes(s)){const e=this.inputs.findIndex((e=>"flow"===e.name)),i=this.outputs.findIndex((e=>"flow"===e.name));if(-1!==e&&(this.inputs[e].shape=5),-1!==i&&(this.outputs[i].shape=5),"easy whileLoopStart"==s||"easy whileLoopEnd"==s)return;this.inputs=this.inputs.filter(((e,n)=>n<=t())),this.outputs=this.outputs.filter(((e,t)=>t<=n())),ve(this)}return Ke.includes(s)&&("easy textIndexSwitch"==s&&(this.widgets=this.widgets.filter(((e,t)=>t<=2))),this.inputs=this.inputs.filter(((e,t)=>t<=1)),ve(this)),null==o?void 0:o.apply(this,arguments)},e.prototype.onConnectionsChange=function(e,i,o,a){var l,r;if("easy whileLoopStart"!=s&&"easy whileLoopEnd"!=s&&a)if(1==e){let e=this.inputs.every((e=>null!==e.link)),n=this.inputs.filter((e=>!["condition","index","total"].includes(e.name)));if(He.includes(s)){if(e){if(n.length>=10)return void Ve.warn(q("The maximum number of inputs is 10"));let e=n[n.length-1],t=parseInt(e.name.split("initial_value")[1])+1;if(this.inputs.find((e=>e.name==="initial_value"+t)))return;let s="initial_value"+t,i="value"+t;this.addInput(s,"*"),this.addOutput(i,"*")}else if(!o){const e=t();let n=this.inputs.findLastIndex((e=>e.link));if(i>=e&&(-1===n||i>=n)){let e=this.inputs[i];if(!e.name||["condition","total"].includes(e.name))return;let t=parseInt(e.name.split("initial_value")[1])+1,n=this.inputs.findIndex((e=>e.name==="initial_value"+t)),s=this.outputs.findIndex((e=>e.name==="value"+t));-1!==n&&this.removeInput(n),-1!==s&&this.removeOutput(s)}}}else if(Ke.includes(s))if(e){if(n.length>=10)return void Ve.warn(q("The maximum number of inputs is 10"));let e=Be[s]+n.length;this.addInput(e,"*")}else o||i==this.inputs.length-2&&this.removeInput(i+1)}else if(2==e){let e=this.outputs.filter((e=>!["flow","index"].includes(e.name))),t=e.every((e=>{var t;return(null==(t=e.links)?void 0:t.length)>0}));if(He.includes(s)){if(t){if(e.length>=10)return void Ve.warn(q("The maximum number of inputs is 10"));let t=e[e.length-1],n=parseInt(t.name.split("value")[1])+1;if(this.inputs.find((e=>e.name==="initial_value"+n)))return;if(this.outputs.find((e=>e.name==="value"+n)))return;let s="initial_value"+n,i="value"+n;this.addInput(s,"*"),this.addOutput(i,"*")}else if(!o){const e=n();let t=a.origin_slot,s=this.outputs.findLastIndex((e=>{var t;return(null==(t=e.links)?void 0:t.length)>0}));if(t>=e&&(-1===s||t>=s)){let e=this.outputs[t];if(!e.name||["flow","index"].includes(e.name))return;let n=parseInt(e.name.split("value")[1])+1,s=this.inputs.findIndex((e=>e.name==="initial_value"+n)),i=this.outputs.findIndex((e=>e.name==="value"+n));if(-1!==s&&(null==(l=this.inputs[s])?void 0:l.link))return;-1!==s&&this.removeInput(s),-1!==i&&this.removeOutput(i)}}}else if(Ye.includes(s))if(t){if(e.length>=10)return void Ve.warn(q("The maximum number of inputs is 10"));let t=Be[s]+e.length;this.addOutput(t,"*")}else if(!o){let t=a.origin_slot;t==this.outputs.length-2&&0==(null==(r=e[t].links)?void 0:r.length)&&this.removeOutput(t+1)}}}}["easy fluxLoader","easy fullLoader"].includes(s)&&(e.prototype.onConnectionsChange=async function(e,t){var n,s,i,o;r&&r.apply(this,[]);const a=this.inputs.find((e=>"model_override"===e.name)),l=this.inputs.find((e=>"vae_override"===e.name));if(fe(this,"vae_name"),fe(this,"ckpt_name"),Qe||(Qe=await b.getNodeDefs()),(null==a?void 0:a.link)&&0==t){const e=null==(o=null==(i=null==(s=null==(n=null==Qe?void 0:Qe.CheckpointLoaderSimple)?void 0:n.input)?void 0:s.required)?void 0:i.ckpt_name)?void 0:o[0];setTimeout((t=>{this.widgets[0].value=e[0],this.widgets_values[0]=e[0],ge(this,fe(this,"ckpt_name"),!(null==a?void 0:a.link))}),1)}else ge(this,fe(this,"ckpt_name"),!(null==a?void 0:a.link));(null==l?void 0:l.link)&&2==t?setTimeout((e=>{this.widgets[1].value="Baked VAE",this.widgets_values[1]="Baked VAE",ge(this,fe(this,"vae_name"),!(null==l?void 0:l.link))}),1):ge(this,fe(this,"vae_name"),!(null==l?void 0:l.link))})},nodeCreated(e){if(e.comfyClass.startsWith("easy ")){if(e.widgets)for(const n of e.widgets){if(!Ue.includes(n.name))continue;let t=n.value;$e(e,n),Object.defineProperty(n,"value",{get:e=>t,set(s){s!==t&&(t=s,$e(e,n))}})}const t=e.comfyClass;if("easy preDetailerFix"==t){const t=e.widgets.find((e=>"customtext"===e.type));if(!t)return;t.dynamicPrompts=!1,t.inputEl.placeholder="wildcard spec: if kept empty, this option will be ignored",t.serializeValue=()=>t.value}if("easy wildcards"==t){const t=e.widgets.find((e=>"text"==e.name));let n=1;Object.defineProperty(e.widgets[n],"value",{set:e=>{if("Select the LoRA to add to the text"!=e){let n=e;n.endsWith(".safetensors")&&(n=n.slice(0,-12)),t.value+=`<lora:${n}>`}},get:e=>"Select the LoRA to add to the text"}),Object.defineProperty(e.widgets[n+1],"value",{set:e=>{"Select the Wildcard to add to the text"!=e&&(""!=t.value&&(t.value+=", "),t.value+=e)},get:e=>"Select the Wildcard to add to the text"}),e.widgets[n].serializeValue=e=>"Select the LoRA to add to the text",e.widgets[n+1].serializeValue=e=>"Select the Wildcard to add to the text"}if(qe.includes(t)){const t=document.createElement("textarea");t.className="comfy-multiline-input",t.readOnly=!0;const n=e.addDOMWidget("info","customtext",t,{getValue:e=>t.value,setValue:e=>t.value=e,serialize:!1});n.inputEl=t,t.addEventListener("input",(()=>{var e;null==(e=n.callback)||e.call(n,n.value)}))}}}});const et=LiteGraph.LGraphNode;v.registerExtension({name:"easy bookmark",registerCustomNodes(){class e extends et{constructor(){super("🔖"),m(this,"type","easy bookmark"),m(this,"title","🔖"),m(this,"slot_start_y",-20),m(this,"___collapsed_width",0),m(this,"isVirtualNode",!0),m(this,"serialize_widgets",!0),m(this,"keypressBound",null),this.addWidget("text","shortcut_key","1",(e=>{""!==(e=e.trim()[0]||"1")&&(this.title="🔖 "+e)}),{y:8}),this.addWidget("number","zoom",1,(e=>{}),{y:8+LiteGraph.NODE_WIDGET_HEIGHT+4,max:2,min:.5,precision:2}),this.keypressBound=this.onKeypress.bind(this)}get _collapsed_width(){return this.___collapsed_width}set _collapsed_width(e){const t=v.canvas,n=t.canvas.getContext("2d");if(n){const e=n.font;n.font=t.title_text_font,this.___collapsed_width=40+n.measureText(this.title).width,n.font=e}}onAdded(){setTimeout((e=>{const t=this.widgets[0].value;t&&(this.title="🔖 "+t)}),1),window.addEventListener("keydown",this.keypressBound)}onRemoved(){window.removeEventListener("keydown",this.keypressBound)}onKeypress(e){const t=e.target;["input","textarea"].includes(t.localName)||this.widgets[0]&&e.key.toLocaleLowerCase()===this.widgets[0].value.toLocaleLowerCase()&&this.canvasToBookmark()}canvasToBookmark(){var e,t;const n=v.canvas;(null==(e=null==n?void 0:n.ds)?void 0:e.offset)&&(n.ds.offset[0]=16-this.pos[0],n.ds.offset[1]=40-this.pos[1]),null!=(null==(t=null==n?void 0:n.ds)?void 0:t.scale)&&(n.ds.scale=Number(this.widgets[1].value||1)),n.setDirty(!0,!0)}}LiteGraph.registerNodeType("easy bookmark",Object.assign(e,{title:"Bookmark 🔖"})),e.category="EasyUse/Util"}}),v.registerExtension({name:"Comfy.EasyUse.ChainNode",init(){v.canvas._mousemove_callback=e=>{x("EasyUse.Nodes.ChainGetSet",null)&&((e=!1,t={})=>{var n,s,i,o,a;const l=Te();if(!l||l.length<1)return;const r=_e();if(0===r.length)return;let A=t.inputX||160,d=t.ouputX||60;if(r.filter((e=>Ce(e))).length>1)return;for(const p of r){let o=t.inputY||10,a=t.outputY||30;const l=[],u=p.id;if(p.graph){Ie[u]||(Ie[u]=[]);for(const e of p.inputs??[]){const t=e.link;if(!t)continue;const{origin_id:n,target_slot:s}=Ee(t),i=be(n);if(!i)continue;if(!Ce(i))continue;let a=p.getConnectionPos(!0,s);Ie[u][s]||(Ie[u][s]=a),!Ie[u]||Ie[u][s][1]===a[1]&&Ie[u][s][0]===a[0]||(A=a[0]-Ie[u][s][0],o=a[1]-Ie[u][s][1],i.pos=[i.pos[0]+A,i.pos[1]+o]),Ie[u][s]=a,l.push(i)}Oe[u]||(Oe[u]=[]);for(const e of p.outputs??[])if(e.links&&p.graph)for(const t of e.links){const{target_id:e,target_slot:s,origin_slot:i}=Ee(t),o=be(e);if(!o)continue;if(!Ce(o))continue;const r=null==(n=o.outputs)?void 0:n.links;if((null==r?void 0:r.length)>1)return;const A=p.getConnectionPos(!1,i);Oe[u][i]||(Oe[u][i]=A),!Oe[u]||Oe[u][i][0]===A[0]&&Oe[u][i][1]===A[1]||(d=A[0]-Oe[u][i][0],a=A[1]-Oe[u][i][1],o.pos=[o.pos[0]+d,o.pos[1]+a]),Oe[u][i]=A,l.push(o)}if(e&&1===r.length){const e=[p,...l];(null==(i=null==(s=p.graph)?void 0:s.list_of_graphcanvas)?void 0:i[0]).selectNodes(e)}}}const u=r[0];if(!u)return;(null==(a=null==(o=u.graph)?void 0:o.list_of_graphcanvas)?void 0:a[0]).setDirty(!0,!0)})()};const e=LGraphCanvas.prototype.showLinkMenu;LGraphCanvas.prototype.showLinkMenu=function(t,n){return n.shiftKey?(((e,t=!1)=>{var n,s,i,o,a,l,r,A,d,u;const{type:p}=e;if("*"===p)return;let{origin_id:c,target_id:h,origin_slot:m,target_slot:f}=e,g=be(c),y=be(h);if(!g||!y)return!1;if("Reroute"===g.type){let e=0;[g,e]=Pe(g),c=null==g?void 0:g.id,m=e,void 0!==m&&-1!==m||(m=0)}if("Reroute"===y.type&&(y=Ge(y),h=null==y?void 0:y.id,f=null==y?void 0:y.inputs.findIndex((e=>e.type===p)),void 0!==f&&-1!==f||(f=0)),void 0===c||void 0===h||!g||!y)return!1;if(t&&(Ce(g)||Ce(y)))return!1;let v=ke((null==(n=y.getInputInfo(f))?void 0:n.name)??p.toLowerCase());v||(v=ke((null==(i=null==(s=null==g?void 0:g.outputs)?void 0:s[m])?void 0:i.name)??(null==(a=null==(o=null==g?void 0:g.outputs)?void 0:o[m])?void 0:a.type.toString())??v+`_from_${c}_to_${h}`));let b,_=!1,L=!1;if(Ce(g))v=ye(g),L=!0;else{const e=null==(r=null==(l=g.outputs)?void 0:l[m])?void 0:r.links;if(e)for(const t of e){const e=be((null==(A=Ee(t))?void 0:A.target_id)??-1);e&&Ce(e)&&Ne(e)&&(v=ye(e),L=!0)}if(!L){for(const e of Te()){if(v!==ye(e)||!Ne(e))continue;const t=null==(d=e.inputs[0])?void 0:d.link;(null==(u=Ee(t))?void 0:u.origin_id)===g.id?L=!0:_=!0}_&&(v+=`_from_${c}_to_${h}`)}}if(!L){b=LiteGraph.createNode("easy setNode"),b.is_auto_link=!0;const e=g.getConnectionPos(!1,m);b.pos=[e[0]+20,e[1]],b.inputs[0].name=v,b.inputs[0].type=p,b.inputs[0].widget=y.inputs[f].widget,Re(b,v),De(b),b.flags.collapsed=!0;let t=[];g.widgets?t=Object.values(g.widgets).map((e=>e.value)):g.widgets_values&&(t=JSON.parse(JSON.stringify(g.widgets_values))),g.connect(m,b,0),g.widgets_values=t,"PrimitiveNode"===g.type&&setTimeout((()=>{if(g){g.connect(m,b,0);for(const[e,n]of t.entries())Re(g,n,e);null!==b&&b.setSize(b.computeSize())}}))}const w=LiteGraph.createNode("easy getNode"),S=y.getConnectionPos(!0,f);w.pos=[S[0]-150,S[1]],w.outputs[0].name=v,w.outputs[0].type=p,w.outputs[0].widget=y.inputs[f].widget,De(w),Re(w,v),null===w||(w.flags.collapsed=!0,w.setSize(w.computeSize()),w.connect(0,y,f))})(t),!1):(e.apply(this,[t,n]),!1)}}});const tt=async()=>{try{const{Running:e,Pending:t}=await b.getQueue();if(e.length>0||t.length>0)return void Ve.error(q("Clean Failed")+":"+q("Please stop all running tasks before cleaning GPU"));200==(await b.fetchApi("/easyuse/cleangpu",{method:"POST"})).status?Ve.success(q("Clean SuccessFully")):Ve.error(q("Clean Failed"))}catch(e){}};let nt={};function st(e,t,n,s,i){var o=LGraphCanvas.active_canvas,a=o.getCanvasWindow(),l=o.graph;if(l)return function e(t,s){var r=LiteGraph.getNodeTypesCategories(o.filter||l.filter).filter((function(e){return e.startsWith(t)})),A=[];r.map((function(n){if(n){var s=new RegExp("^("+t+")"),i=n.replace(s,"").split("/")[0],o=""===t?i+"/":t+i+"/",a=i;-1!=a.indexOf("::")&&(a=a.split("::")[1]),-1===A.findIndex((function(e){return e.value===o}))&&A.push({value:o,content:a,has_submenu:!0,callback:function(t,n,s,i){e(t.value,i)}})}})),LiteGraph.getNodeTypesInCategory(t.slice(0,-1),o.filter||l.filter).map((function(e){if(!e.skip_list){var t={value:e.type,content:e.title,has_submenu:!1,callback:function(e,t,n,s){var a=s.getFirstEvent();o.graph.beforeChange();var l=LiteGraph.createNode(e.value);l&&(l.pos=o.convertEventToCanvasOffset(a),o.graph.add(l)),i&&i(l),o.graph.afterChange()}};A.push(t)}}));const d=x("EasyUse.ContextMenu.NodesSort",null);""===t&&d&&(A=function(e){let t=[],n=[];return e.forEach((e=>{(null==e?void 0:e.value)&&M.includes(e.value.split("/")[0])?t.push(e):n.push(e)})),[{title:q("ComfyUI Basic"),is_category_title:!0},...t,{title:q("Others A~Z"),is_category_title:!0},...n.sort(((e,t)=>e.content.localeCompare(t.content)))]}(A)),new LiteGraph.ContextMenu(A,{event:n,parentMenu:s},a)}("",s),!1}function it(e){return encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))}v.registerExtension({name:"Comfy.EasyUse.ContextMenu",async setup(){LGraphCanvas.onMenuAdd=st,lt();const e=LiteGraph.ContextMenu;LiteGraph.ContextMenu=function(t,n){if(!(null==n?void 0:n.callback)||t.some((e=>"string"!=typeof e))){if(n.parentMenu);else if(n.extra);else if(n.scale);else{const e=x("EasyUse.ContextMenu.QuickOptions",null);if(n.hasOwnProperty("extra")&&"Disable"!==e){if("At the forefront"==e?t.unshift(null):t.push(null),s=window.location.host,["192.168.","10.","127.",/^172\.((1[6-9]|2[0-9]|3[0-1])\.)/].some((e=>"string"==typeof e?s.startsWith(e):e.test(s)))){const n={content:`<i class="mdi mdi-refresh-circle comfyui-easyuse-error" style="margin-right:2px;font-size:16px"></i>${q("Reboot ComfyUI")}`,callback:e=>(async()=>{if(confirm(q("Are you sure you'd like to reboot the server?")))try{b.fetchApi("/easyuse/reboot")}catch(e){}})()};"At the forefront"==e?t.unshift(n):t.push(n)}const n=x("EasyUse.Hotkeys.cleanVRAMUsed",null)?"("+B("Shift+r")+")":"",i={content:`<i class="mdi mdi-rocket comfyui-easyuse-theme" style="margin-right:2px;font-size:16px"></i>${q("Cleanup Of VRAM Usage")} ${n}`,callback:e=>tt()};"At the forefront"==e?t.unshift(i):t.push(i);const o=x("EasyUse.Hotkeys.toggleNodesMap",null)?"("+B("Shift+m")+")":"",a={content:`<i class="mdi mdi-sitemap comfyui-easyuse-warning" style="margin-right:2px;font-size:14px"></i>${q("Nodes Map")} ${o}`,callback:e=>{var t,n,s;const i=(null==(t=v.extensionManager)?void 0:t.sidebarTab)||v.extensionManager,o=(null==(n=v.extensionManager.sidebarTab)?void 0:n.activeSidebarTabId)||(null==(s=v.extensionManager)?void 0:s.activeSidebarTab);i.activeSidebarTabId=o==G?null:G}};"At the forefront"==e?t.unshift(a):t.push(a)}}return e.apply(this,[...arguments])}{const s=function(e,t){const n=x("EasyUse.ContextMenu.ModelsThumbnails",null),s=x("EasyUse.ContextMenu.SubDirectories",null);if(!n&&!s)return null;const i=["ckpt","pt","bin","pth","safetensors","gguf"];if((null==e?void 0:e.length)>0){const t=null==(o=e[e.length-1])?void 0:o.substring(o.lastIndexOf(".")+1);if(!i.includes(t))return null}var o;const a=t.callback,l=[...e];t.callback=null;const r=(e,t)=>{["None","无","無","なし"].includes(e.content)?a("None",t):a(l.find((t=>t.endsWith(e.content)),t))};if(n&&!s)return e.map((e=>{var t,n;let s=null==(t=nt[e])?void 0:t.folder,i=null==(n=nt[e])?void 0:n.pathIndex;const o=window.location.protocol,a=window.location.host;let l=s?`${`${o}//${a}`}/api/experiment/models/preview/${s}/${i}/${it(e)}`:"";return{folder:s,content:e,fullName:e,title:_("div.comfyui-easyuse-contextmenu-model",{},[_("span",{},e)]).outerHTML,thumbnail:l,callback:r}}));const A=e,d={},u=[],p=[];for(const f of A){const e=f.indexOf("/")>-1?"/":"\\",t=f.split(e);if(t.length>1){const n=t.shift();d[n]=d[n]||[],d[n].push({value:t.join(e),fullValue:f})}else"CHOOSE"===f||f.startsWith("DISABLE ")?u.push({value:f,fullValue:f}):p.push({value:f,fullValue:f})}const c=Object.values(d).length,h=[],m=(e,t="",s)=>{var i,o;let a;a=_("div.comfyui-easyuse-contextmenu-model",{},[_("span",{},e)]);let l=null==(i=nt[s])?void 0:i.folder,A=null==(o=nt[s])?void 0:o.pathIndex;const d=window.location.protocol,u=window.location.host;let p=l?`${`${d}//${u}`}/api/experiment/models/preview/${l}/${A}/${it(s)}`:"";return{folder:l,content:e,fullName:s,thumbnail:n?p:null,title:a.outerHTML,callback:r}};if(c>0){const e=(t,n)=>{let s=[],i=[];const o=t.map((({value:e,fullValue:t})=>{const o={},a=e.indexOf("/")>-1?"/":"\\",l=e.split(a);if(l.length>1){const e=l.shift();o[e]=o[e]||[],o[e].push({value:l.join(a),fullValue:t})}if(Object.values(d).length>0){let n=Object.keys(o)[0];n&&o[n]?s.push({key:n,value:o[n][0]}):i.push(m(e,n,t))}return m(e,n,t)}));if(s.length>0){let t={};return s.forEach((e=>{t[e.key]=t[e.key]||[],t[e.key].push(e.value)})),[...Object.entries(t).map((t=>({content:t[0],has_submenu:!0,callback:()=>{},submenu:{options:e(t[1],t[0])}}))),...i]}return o};for(const[t,n]of Object.entries(d))h.push({content:t,has_submenu:!0,callback:()=>{},submenu:{options:e(n,t)}})}h.push(...p.map((e=>m(e.value,"",e.fullValue)))),u.length>0&&h.push(...u.map((e=>m(e.value,"",e.fullValue))));return h}(t,n);return s?e.call(this,s,n):e.apply(this,[...arguments])}var s},LiteGraph.ContextMenu.prototype=e.prototype,x("EasyUse.ContextMenu.NodesSort",null)&&(LiteGraph.ContextMenu.prototype.addItem=at),document.getElementById("graph-canvas").addEventListener("mouseenter",(e=>{let t=document.getElementById("easyuse-model-thumbnail");(1==(null==t?void 0:t.style.opacity)||t.src)&&At()}))}});const ot=e=>e&&"object"==typeof e&&"image"in e&&e.content;function at(e,t,n){var s=this;n=n||{};var i=document.createElement("div");i.className="litemenu-entry submenu";var o=!1;function a(e){var t=this.value,i=!0;(s.current_submenu&&s.current_submenu.close(e),n.callback)&&(!0===n.callback.call(this,t,n,e,s,n.node)&&(i=!1));if(t){if(t.callback&&!n.ignore_item_callbacks&&!0!==t.disabled)!0===t.callback.call(this,t,n,e,s,n.extra)&&(i=!1);if(t.submenu){if(!t.submenu.options)throw"ContextMenu submenu needs options";new s.constructor(t.submenu.options,{callback:t.submenu.callback,event:e,parentMenu:s,ignore_item_callbacks:t.submenu.ignore_item_callbacks,title:t.submenu.title,extra:t.submenu.extra,autoopen:n.autoopen}),i=!1}}i&&!s.lock&&s.close()}return null===t?i.classList.add("separator"):t.is_category_title?(i.classList.remove("litemenu-entry"),i.classList.remove("submenu"),i.classList.add("litemenu-title"),i.innerHTML=t.title):(i.innerHTML=t&&t.title?t.title:e,i.value=t,t&&(t.disabled&&(o=!0,i.classList.add("disabled")),(t.submenu||t.has_submenu)&&i.classList.add("has_submenu")),"function"==typeof t?(i.dataset.value=e,i.onclick_callback=t):i.dataset.value=t,t.className&&(i.className+=" "+t.className)),i&&ot(t)&&(null==t?void 0:t.image)&&!t.submenu&&(i.textContent+=" *",_("div.pysssss-combo-image",{id:`pysssss-image-combo-${e}`,parent:document.body,style:{backgroundImage:`url(/pysssss/view/${it(t.image)})`}})),i&&(null==t?void 0:t.thumbnail)&&(i.addEventListener("mouseenter",rt(i,t,this.root),{passive:!0}),i.addEventListener("mouseleave",At(),{passive:!0}),i.addEventListener("click",At(),{passive:!0})),this.root.appendChild(i),o||i.addEventListener("click",a),!o&&n.autoopen&&LiteGraph.pointerListenerAdd(i,"enter",(function(e){var t=this.value;if(!t||!t.has_submenu)return;a.call(this,e)})),i}const lt=async()=>{["checkpoints","loras","diffusion_models"].map((async e=>{const t=await b.getModels(e);(null==t?void 0:t.length)>0&&t.map((t=>{nt[t.name]={folder:e,pathIndex:t.pathIndex}}))}))},rt=(e,t,n)=>s=>{var i;const o=t=>{setTimeout((s=>{const i=n.getBoundingClientRect();if(!i)return;const o=document.body.getBoundingClientRect();if(!o)return;const{left:a,top:l}=((e,t,n)=>{const{x:s}=e.getBoundingClientRect();let{top:i,left:o}=t;const{width:a,height:l}=n;return s<=a&&(o+=t.width),t.top<=l||(i=l),{left:o,top:i}})(e,i,o),r=document.getElementById("easyuse-model-thumbnail");r.src=t,r.style.left=`${a}px`,r.style.top=`${l}px`,r.style.display="block",r.style.opacity=1,r.onerror=e=>{r.src=z}}),10)};if(null==(i=null==nt?void 0:nt[t.fullName])?void 0:i.img){let e=nt[t.fullName].img;o("no_preview_image"==e?z:e.src)}else{let e=new Image;e.src=t.thumbnail,e.onload=n=>{nt[t.fullName].img=e,o(t.thumbnail)},e.onerror=n=>{e=null,nt[t.fullName].img="no_preview_image",o(z)}}},At=()=>e=>{const t=document.getElementById("easyuse-model-thumbnail");t.style.display="none",t.style.opacity=0,t.style.left="0px",t.style.top="0px"};class dt extends L{constructor(){super(),this.element.classList.add("easyuse-model-metadata")}show(e){super.show(_("div",Object.keys(e).map((t=>_("div",[_("label",{textContent:t}),_("span",{textContent:e[t]})])))))}}class ut extends L{constructor(e){super(),this.name=e,this.element.classList.add("easyuse-model-info")}get customNotes(){return this.metadata["easyuse.notes"]}set customNotes(e){this.metadata["easyuse.notes"]=e}get hash(){return this.metadata["easyuse.sha256"]}async show(e,t){this.type=e;const n=b.fetchApi("/easyuse/metadata/"+encodeURIComponent(`${e}/${t}`));this.info=_("div",{style:{flex:"auto"}}),this.imgCurrent=0,this.imgList=_("div.easyuse-preview-list",{style:{display:"none"}}),this.imgWrapper=_("div.easyuse-preview",[_("div.easyuse-preview-group",[this.imgList])]),this.main=_("main",{style:{display:"flex"}},[this.imgWrapper,this.info]),this.content=_("div.easyuse-model-content",[_("div.easyuse-model-header",[_("h2",{textContent:this.name})]),this.main]);const s=_("div",{textContent:"ℹ️ Loading...",parent:this.content});super.show(this.content),this.metadata=await(await n).json(),this.viewMetadata.style.cursor=this.viewMetadata.style.opacity="",this.viewMetadata.removeAttribute("disabled"),s.remove(),this.addInfo()}createButtons(){const e=super.createButtons();return this.viewMetadata=_("button",{type:"button",textContent:"View raw metadata",disabled:"disabled",style:{opacity:.5,cursor:"not-allowed"},onclick:e=>{this.metadata&&(new dt).show(this.metadata)}}),e.unshift(this.viewMetadata),e}parseNote(){if(!this.customNotes)return[];let e=[];const t=new RegExp("(\\bhttps?:\\/\\/[^\\s]+)","g");let n,s=0;do{let i;n=t.exec(this.customNotes);let o=0;n?(i=n.index,o=n.index+n[0].length):i=this.customNotes.length;let a=this.customNotes.substring(s,i);a&&(a=a.replaceAll("\n","<br>"),e.push(_("span",{innerHTML:a}))),n&&e.push(_("a",{href:n[0],textContent:n[0],target:"_blank"})),s=o}while(n);return e}addInfoEntry(e,t){return _("p",{parent:this.info},["string"==typeof e?_("label",{textContent:e+": "}):e,"string"==typeof t?_("span",{textContent:t}):t])}async getCivitaiDetails(){const e=await fetch("https://civitai.com/api/v1/model-versions/by-hash/"+this.hash);if(200===e.status)return await e.json();throw 404===e.status?new Error("Model not found"):new Error(`Error loading info (${e.status}) ${e.statusText}`)}addCivitaiInfo(){const e=this.getCivitaiDetails(),t=_("span",{textContent:"ℹ️ Loading..."});return this.addInfoEntry(_("label",[_("img",{style:{width:"18px",position:"relative",top:"3px",margin:"0 5px 0 0"},src:"https://civitai.com/favicon.ico"}),_("span",{textContent:"Civitai: "})]),t),e.then((e=>{var t,n;this.imgWrapper.style.display="block";let s=this.element.querySelector(".easyuse-model-header");s&&s.replaceChildren(_("h2",{textContent:this.name}),_("div.easyuse-model-header-remark",[_("h5",{textContent:q("Updated At:")+Y(new Date(e.updatedAt),"yyyy/MM/dd")}),_("h5",{textContent:q("Created At:")+Y(new Date(e.updatedAt),"yyyy/MM/dd")})]));let i=null,o=this.parseNote.call(this),a=q("✏️ Edit"),l=_("div.easyuse-model-detail-textarea",[_("p",(null==o?void 0:o.length)>0?o:{textContent:q("No notes")})]);if(o&&0!=o.length?l.classList.remove("empty"):l.classList.add("empty"),this.info.replaceChildren(_("div.easyuse-model-detail",[_("div.easyuse-model-detail-head.flex-b",[_("span",q("Notes")),_("a",{textContent:a,href:"#",style:{fontSize:"12px",float:"right",color:"var(--warning-color)",textDecoration:"none"},onclick:async e=>{if(e.preventDefault(),i){if(i.value!=this.customNotes){Ve.showLoading(q("Saving Notes...")),this.customNotes=i.value;const e=await b.fetchApi("/easyuse/metadata/notes/"+encodeURIComponent(`${this.type}/${this.name}`),{method:"POST",body:this.customNotes});if(Ve.hideLoading(),200!==e.status)return Ve.error(q("Saving Failed")),void alert(`Error saving notes (${e.status}) ${e.statusText}`);Ve.success(q("Saving Succeed")),o=this.parseNote.call(this),l.replaceChildren(_("p",(null==o?void 0:o.length)>0?o:{textContent:q("No notes")})),i.value?l.classList.remove("empty"):l.classList.add("empty")}else l.replaceChildren(_("p",{textContent:q("No notes")})),l.classList.add("empty");e.target.textContent=a,i.remove(),i=null}else e.target.textContent="💾 Save",i=_("textarea",{placeholder:q("Type your notes here"),style:{width:"100%",minWidth:"200px",minHeight:"50px",height:"100px"},textContent:this.customNotes}),l.replaceChildren(i),i.focus()}})]),l]),_("div.easyuse-model-detail",[_("div.easyuse-model-detail-head",{textContent:q("Details")}),_("div.easyuse-model-detail-body",[_("div.easyuse-model-detail-item",[_("div.easyuse-model-detail-item-label",{textContent:q("Type")}),_("div.easyuse-model-detail-item-value",{textContent:e.model.type})]),_("div.easyuse-model-detail-item",[_("div.easyuse-model-detail-item-label",{textContent:q("BaseModel")}),_("div.easyuse-model-detail-item-value",{textContent:e.baseModel})]),_("div.easyuse-model-detail-item",[_("div.easyuse-model-detail-item-label",{textContent:q("Download")}),_("div.easyuse-model-detail-item-value",{textContent:(null==(t=e.stats)?void 0:t.downloadCount)||0})]),_("div.easyuse-model-detail-item",[_("div.easyuse-model-detail-item-label",{textContent:q("Trained Words")}),_("div.easyuse-model-detail-item-value",{textContent:(null==e?void 0:e.trainedWords.join(","))||"-"})]),_("div.easyuse-model-detail-item",[_("div.easyuse-model-detail-item-label",{textContent:q("Source")}),_("div.easyuse-model-detail-item-value",[_("label",[_("img",{style:{width:"14px",position:"relative",top:"3px",margin:"0 5px 0 0"},src:"https://civitai.com/favicon.ico"}),_("a",{href:"https://civitai.com/models/"+e.modelId,textContent:"View "+e.model.name,target:"_blank"})])])])])])),null==(n=e.images)?void 0:n.length){this.imgCurrent=0,this.isSaving=!1,e.images.map((e=>e.url&&this.imgList.appendChild(_("div.easyuse-preview-slide",[_("div.easyuse-preview-slide-content",[_("img",{src:e.url}),_("div.save",{textContent:"Save as preview",onclick:async()=>{if(this.isSaving)return;this.isSaving=!0,Ve.showLoading(q("Saving Preview..."));const t=await(await fetch(e.url)).blob(),n="temp_preview."+new URL(e.url).pathname.split(".")[1],s=new FormData;s.append("image",new File([t],n)),s.append("overwrite","true"),s.append("type","temp");if(200!==(await b.fetchApi("/upload/image",{method:"POST",body:s})).status)return this.isSaving=!1,Ve.error(q("Saving Failed")),Ve.hideLoading(),void alert(`Error saving preview (${req.status}) ${req.statusText}`);await b.fetchApi("/easyuse/save/"+encodeURIComponent(`${this.type}/${this.name}`),{method:"POST",body:JSON.stringify({filename:n,type:"temp"}),headers:{"content-type":"application/json"}}).then((e=>{Ve.success(q("Saving Succeed")),Ve.hideLoading()})),this.isSaving=!1,app.refreshComboInNodes()}})])]))));let t=this;this.imgDistance=(-660*this.imgCurrent).toString(),this.imgList.style.display="",this.imgList.style.transform="translate3d("+this.imgDistance+"px, 0px, 0px)",this.slides=this.imgList.querySelectorAll(".easyuse-preview-slide"),this.slideLeftButton=_("button.left",{parent:this.imgWrapper,style:{display:e.images.length<=2?"none":"block"},innerHTML:'<svg viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg" width="16" height="16" style="transform: rotate(90deg);"><path d="M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg>',onclick:()=>{e.images.length<=2||(t.imgList.classList.remove("no-transition"),0==t.imgCurrent?(t.imgCurrent=e.images.length/2-1,this.slides[this.slides.length-1].style.transform="translate3d("+(-660*(this.imgCurrent+1)).toString()+"px, 0px, 0px)",this.slides[this.slides.length-2].style.transform="translate3d("+(-660*(this.imgCurrent+1)).toString()+"px, 0px, 0px)",t.imgList.style.transform="translate3d(660px, 0px, 0px)",setTimeout((e=>{this.slides[this.slides.length-1].style.transform="translate3d(0px, 0px, 0px)",this.slides[this.slides.length-2].style.transform="translate3d(0px, 0px, 0px)",t.imgDistance=(-660*this.imgCurrent).toString(),t.imgList.style.transform="translate3d("+t.imgDistance+"px, 0px, 0px)",t.imgList.classList.add("no-transition")}),500)):(t.imgCurrent=t.imgCurrent-1,t.imgDistance=(-660*this.imgCurrent).toString(),t.imgList.style.transform="translate3d("+t.imgDistance+"px, 0px, 0px)"))}}),this.slideRightButton=_("button.right",{parent:this.imgWrapper,style:{display:e.images.length<=2?"none":"block"},innerHTML:'<svg viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg" width="16" height="16" style="transform: rotate(-90deg);"><path d="M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg>',onclick:()=>{if(!(e.images.length<=2))if(t.imgList.classList.remove("no-transition"),t.imgCurrent>=e.images.length/2-1){t.imgCurrent=0;const n=e.images.length/2;this.slides[0].style.transform="translate3d("+(660*n).toString()+"px, 0px, 0px)",this.slides[1].style.transform="translate3d("+(660*n).toString()+"px, 0px, 0px)",t.imgList.style.transform="translate3d("+(-660*n).toString()+"px, 0px, 0px)",setTimeout((e=>{this.slides[0].style.transform="translate3d(0px, 0px, 0px)",this.slides[1].style.transform="translate3d(0px, 0px, 0px)",t.imgDistance=(-660*this.imgCurrent).toString(),t.imgList.style.transform="translate3d("+t.imgDistance+"px, 0px, 0px)",t.imgList.classList.add("no-transition")}),500)}else t.imgCurrent=t.imgCurrent+1,t.imgDistance=(-660*this.imgCurrent).toString(),t.imgList.style.transform="translate3d("+t.imgDistance+"px, 0px, 0px)"}})}return e.description&&_("div",{parent:this.content,innerHTML:e.description,style:{marginTop:"10px"}}),e})).catch((e=>{this.imgWrapper.style.display="none",t.textContent="⚠️ "+e.message})).finally((e=>{}))}}class pt extends ut{async addInfo(){await this.addCivitaiInfo()}}class ct extends ut{getTagFrequency(){if(!this.metadata.ss_tag_frequency)return[];const e=JSON.parse(this.metadata.ss_tag_frequency),t={};for(const n in e){const s=e[n];for(const e in s)e in t?t[e]+=s[e]:t[e]=s[e]}return Object.entries(t).sort(((e,t)=>t[1]-e[1]))}getResolutions(){let e=[];if(this.metadata.ss_bucket_info){const t=JSON.parse(this.metadata.ss_bucket_info);if(null==t?void 0:t.buckets)for(const{resolution:n,count:s}of Object.values(t.buckets))e.push([s,`${n.join("x")} * ${s}`])}e=e.sort(((e,t)=>t[0]-e[0])).map((e=>e[1]));let t=this.metadata.ss_resolution;if(t){const n=t.split(","),s=n[0].replace("(",""),i=n[1].replace(")","");e.push(`${s.trim()}x${i.trim()} (Base res)`)}else(t=this.metadata["modelspec.resolution"])&&e.push(t+" (Base res");return e.length||e.push("⚠️ Unknown"),e}getTagList(e){return e.map((e=>_("li.easyuse-model-tag",{dataset:{tag:e[0]},$:e=>{e.onclick=()=>{e.classList.toggle("easyuse-model-tag--selected")}}},[_("p",{textContent:e[0]}),_("span",{textContent:e[1]})])))}addTags(){let e,t=this.getTagFrequency();if(null==t?void 0:t.length){const n=t.length;let s;n>500&&(t=t.slice(0,500),e=_("p",[_("span",{textContent:"⚠️ Only showing first 500 tags "}),_("a",{href:"#",textContent:`Show all ${n}`,onclick:()=>{s.replaceChildren(...this.getTagList(this.getTagFrequency())),e.remove()}})])),s=_("ol.easyuse-model-tags-list",this.getTagList(t)),this.tags=_("div",[s])}else this.tags=_("p",{textContent:"⚠️ No tag frequency metadata found"});this.content.append(this.tags),e&&this.content.append(e)}async addInfo(){const e=this.addCivitaiInfo();this.addTags();const t=await e;t&&_("div",{parent:this.content,innerHTML:t.description,style:{maxHeight:"250px",overflow:"auto"}})}createButtons(){const e=super.createButtons();function t(e,t){const n=_("textarea",{parent:document.body,style:{position:"fixed"},textContent:t.map((e=>e.dataset.tag)).join(", ")});n.select();try{document.execCommand("copy"),e.target.dataset.text||(e.target.dataset.text=e.target.textContent),e.target.textContent="Copied "+t.length+" tags",setTimeout((()=>{e.target.textContent=e.target.dataset.text}),1e3)}catch(s){prompt("Copy to clipboard: Ctrl+C, Enter",text)}finally{document.body.removeChild(n)}}return e.unshift(_("button",{type:"button",textContent:"Copy Selected",onclick:e=>{t(e,[...this.tags.querySelectorAll(".easyuse-model-tag--selected")])}}),_("button",{type:"button",textContent:"Copy All",onclick:e=>{t(e,[...this.tags.querySelectorAll(".easyuse-model-tag")])}})),e}}const ht={pipe:{category:"Easy Pipe",nodes:["easy pipeIn","easy pipeOut","easy pipeEdit","easy pipeEditPrompt","easy pipeBatchIndex"],input:{pipe:"pipe"},output:{pipe:"pipe"},widget:{optional_positive:"optional_positive",optional_negative:"optional_negative"}},loaders:{category:"Easy Loaders",nodes:["easy fullLoader","easy a1111Loader","easy comfyLoader","easy kolorsLoader","easy hunyuanDiTLoader","easy pixArtLoader","easy fluxLoader"],input:{optional_lora_stack:"optional_lora_stack",optional_controlnet_stack:"optional_controlnet_stack",positive:"positive",negative:"negative"},output:{pipe:"pipe",model:"model",vae:"vae",clip:null,positive:null,negative:null,latent:null},widget:{ckpt_name:"ckpt_name",vae_name:"vae_name",clip_skip:"clip_skip",lora_name:"lora_name",resolution:"resolution",empty_latent_width:"empty_latent_width",empty_latent_height:"empty_latent_height",positive:"positive",negative:"negative",batch_size:"batch_size",a1111_prompt_style:"a1111_prompt_style"}},preSampling:{category:"Easy PreSampling",nodes:["easy preSampling","easy preSamplingAdvanced","easy preSamplingDynamicCFG","easy preSamplingNoiseIn","easy preSamplingCustom","easy preSamplingLayerDiffusion","easy fullkSampler"],input:{pipe:"pipe",image_to_latent:"image_to_latent",latent:"latent"},output:{pipe:"pipe"},widget:{steps:"steps",cfg:"cfg",cfg_scale_min:"cfg",sampler_name:"sampler_name",scheduler:"scheduler",denoise:"denoise",seed_num:"seed_num",seed:"seed"}},samplers:{category:"Custom Sampler",nodes:["KSamplerSelect","SamplerEulerAncestral","SamplerEulerAncestralCFG++","SamplerLMS","SamplerDPMPP_3M_SDE","SamplerDPMPP_2M_SDE","SamplerDPMPP_SDE","SamplerDPMAdaptative","SamplerLCMUpscale","SamplerTCD","SamplerTCD EulerA"],output:{SAMPLER:"SAMPLER"}},sigmas:{category:"Custom Sigmas",nodes:["BasicScheduler","KarrasScheduler","ExponentialScheduler","PolyexponentialScheduler","VPScheduler","BetaSamplingScheduler","SDTurboScheduler","SplitSigmas","SplitSigmasDenoise","FlipSigmas","AlignYourStepsScheduler","GITSScheduler"],output:{SIGMAS:"SIGMAS"}},kSampler:{category:"Easy kSampler",nodes:["easy kSampler","easy kSamplerTiled","easy kSamplerCustom","easy kSamplerInpainting","easy kSamplerDownscaleUnet","easy kSamplerLayerDiffusion"],input:{pipe:"pipe",model:"model"},output:{pipe:"pipe",image:"image"},widget:{image_output:"image_output",save_prefix:"save_prefix",link_id:"link_id"}},controlNet:{category:"Easy ControlNet",nodes:["easy controlnetLoader","easy controlnetLoaderADV","easy controlnetLoader++","easy instantIDApply","easy instantIDApplyADV"],input:{pipe:"pipe",image:"image",image_kps:"image_kps",control_net:"control_net",positive:"positive",negative:"negative",mask:"mask"},output:{pipe:"pipe",positive:"positive",negative:"negative"},widget:{control_net_name:"control_net_name",strength:["strength","cn_strength"],scale_soft_weights:["scale_soft_weights","cn_soft_weights"],cn_strength:["strength","cn_strength"],cn_soft_weights:["scale_soft_weights","cn_soft_weights"]}},adapter:{category:"Easy Adapter",nodes:["easy ipadapterApply","easy ipadapterApplyADV","easy ipadapterApplyFaceIDKolors","easy ipadapterStyleComposition","easy ipadapterApplyFromParams","easy pulIDApply","easy pulIDApplyADV"],input:{model:"model",image:"image",image_style:"image",attn_mask:"attn_mask",optional_ipadapter:"optional_ipadapter"},output:{model:"model",tiles:"tiles",masks:"masks",ipadapter:"ipadapter"},widget:{preset:"preset",lora_strength:"lora_strength",provider:"provider",weight:"weight",weight_faceidv2:"weight_faceidv2",start_at:"start_at",end_at:"end_at",cache_mode:"cache_mode",use_tiled:"use_tiled",insightface:"insightface",pulid_file:"pulid_file"}},positive:{category:"Easy Positive",nodes:["easy positive","easy wildcards"],input:{},output:{text:"positive",positive:"text"},widget:{text:"positive",positive:"text"}},loadImage:{category:"Easy LoadImage",nodes:["easy loadImageBase64","LoadImage","LoadImageMask"],input:{pipe:"pipe",image:"image",mask:"mask"},output:{IMAGE:"IMAGE",MASK:"MASK"},widget:{image:"image",base64_data:"base64_data",channel:"channel"}},saveImage:{category:"Save/Preview Image",nodes:["SaveImage","PreviewImage"]},inPaint:{category:"Easy Inpaint",nodes:["easy applyBrushNet","easy applyPowerPaint","easy applyInpaint"],input:{},output:{pipe:"pipe"},widget:{dtype:"dtype",fitting:"fitting",function:"function",scale:"scale",start_at:"start_at",end_at:"end_at"}},showAny:{category:"Show Anything",nodes:["easy showAnything","easy showAnythingLazy"],input:{anything:"anything"},output:{output:"output"}},saveText:{category:"Save Text",nodes:["easy saveText","easy saveTextLazy"],input:{image:"image",text:"text",output_file_path:"output_file_path",file_name:"file_name",file_extension:"file_extension",overwrite:"overwrite"},output:{text:"text",image:"image"},widget:{image:"image",text:"text",output_file_path:"output_file_path",file_name:"file_name",file_extension:"file_extension",overwrite:"overwrite"}},persona:{category:"LLM Party Persona",nodes:["load_persona","classify_persona","classify_persona_plus","custom_persona","translate_persona","flux_persona"],input:{file_content:"file_content"},output:{system_prompt:"system_prompt"},widget:{is_enable:"is_enable"}},llmModelLoader:{category:"LLM Model Loader",nodes:["LLM_api_loader","genai_api_loader","LLM_local_loader"],output:{model:"model"}},llmModelChain:{category:"LLM Model Chain",nodes:["LLM","LLM_local"],input:{model:"model",image:"images",images:"image",extra_parameters:"extra_parameters",system_prompt_input:"system_prompt_input",user_prompt_input:"user_prompt_input",tools:"tools",file_content:"file_content"},output:{assistant_response:"assistant_response",history:"history",tool:"tool",image:"image"},widget:{system_prompt:"system_prompt",user_prompt:"user_prompt",temperature:"temperature",is_memory:"is_memory",is_tools_in_sys_prompt:"is_tools_in_sys_prompt",max_length:"max_length",main_brain:"main_brain",conversation_rounds:"conversation_rounds",history_record:"history_record",is_enable:"is_enable"}},maskModify:{category:"Mask Modify",nodes:["CropMask","ThresholdMask","GrowMask","FeatherMask","LayerMask: MaskGrain","LayerMask: MaskEdgeUltraDetail","LayerMask: MaskEdgeUltraDetail V2"],input:{mask:"mask"},output:{MASK:"MASK",mask:"mask",image:"image"}},maskModifyWAS:{category:"Mask Modify (WAS)",nodes:["Mask Dilate Region","Mask Gaussian Region"],input:{masks:"masks"},output:{MASKS:"MASKS"}}};function mt(e,t,n){return function(){!function(e,t,n){var s;const i=LiteGraph.createNode(t);if(i){if(v.graph.add(i),i.pos=e.pos.slice(),i.size=e.size.slice(),(null==(s=e.widgets)?void 0:s.length)>0&&e.widgets.forEach((e=>{var t,s,o;if(null==(s=null==(t=ht[n])?void 0:t.widget)?void 0:s[e.name]){const t=ht[n].widget[e.name];if(t&&i.widgets){const n=(o=t,i.widgets.find((e=>"object"==typeof o?o.includes(e.name):e.name===o)));n&&(n.value=e.value,"seed_num"==e.name&&(n.linkedWidgets[0].value=e.linkedWidgets[0].value),"converted-widget"==e.type&&Lt(i,n,e))}}})),e.inputs&&e.inputs.forEach(((t,s)=>{var o,a,l;if(t&&t.link&&(null==(a=null==(o=ht[n])?void 0:o.input)?void 0:a[t.name])){const s=null==(l=ht[n])?void 0:l.input[t.name];if(null===s)return;const o=i.findInputSlot(s);if(-1!==o){const n=e.graph.links[t.link];if(n){const t=e.graph.getNodeById(n.origin_id);t&&t.connect(n.origin_slot,i,o)}}}})),e.outputs&&e.outputs.forEach(((t,s)=>{var o,a;if(t&&t.links&&(null==(a=null==(o=ht[n])?void 0:o.output)?void 0:a[t.name])){const s=ht[n].output[t.name];if(null===s)return;const o=i.findOutputSlot(s);-1!==o&&t.links.forEach((t=>{const n=e.graph.links[t];if(n){const t=e.graph.getNodeById(n.target_id);t&&i.connect(o,t,n.target_slot)}}))}})),v.graph.remove(e),"easy fullkSampler"==i.type){const e=i.outputs[0].links;if(e&&e[0]){const t=v.graph._nodes.find((t=>t.inputs&&t.inputs[0]&&t.inputs[0].link==e[0]));t&&v.graph.remove(t)}}else if(ht.preSampling.nodes.includes(i.type)){const e=i.outputs[0].links;if(!e||!e[0]){const e=LiteGraph.createNode("easy kSampler");v.graph.add(e),e.pos=i.pos.slice(),e.pos[0]=e.pos[0]+i.size[0]+20;const t=i.findInputSlot("pipe");-1!==t&&i&&i.connect(0,e,t)}}i.setSize([i.size[0],i.computeSize()[1]])}}(e,t,n)}}const ft=(e,t)=>{const n=e.prototype.getExtraMenuOptions;e.prototype.getExtraMenuOptions=function(){const e=n.apply(this,arguments);return t.apply(this,arguments),e}},gt=(e,t,n,s,i=!0)=>{ft(s,(function(s,o){o.unshift({content:e,has_submenu:i,callback:(e,s,i,o,a)=>yt(e,s,i,o,a,t,n)}),"loaders"==t&&(o.unshift({content:q("💎 View Lora Info..."),callback:(e,t,n,s,i)=>{let o=i.widgets.find((e=>"lora_name"==e.name)).value;o&&"None"!=o&&new ct(o).show("loras",o)}}),o.unshift({content:q("💎 View Checkpoint Info..."),callback:(e,t,n,s,i)=>{let o=i.widgets[0].value;o&&"None"!=o&&new pt(o).show("checkpoints",o)}}))}))},yt=(e,t,n,s,i,o,a)=>{const l=[];return a.map((e=>{i.type!==e&&l.push({content:`${e}`,callback:mt(i,e,o)})})),new LiteGraph.ContextMenu(l,{event:n,callback:null,parentMenu:s,node:i}),!1},vt="converted-widget",bt=Symbol();function _t(e,t,n=""){if(t.origType=t.type,t.origComputeSize=t.computeSize,t.origSerializeValue=t.serializeValue,t.computeSize=()=>[0,-4],t.type=vt+n,t.serializeValue=()=>{if(!e.inputs)return;let n=e.inputs.find((e=>{var n;return(null==(n=e.widget)?void 0:n.name)===t.name}));return n&&n.link?t.origSerializeValue?t.origSerializeValue():t.value:void 0},t.linkedWidgets)for(const s of t.linkedWidgets)_t(e,s,":"+t.name)}function Lt(e,t,n){_t(e,t);const{type:s}=function(e){let t=e[0];t instanceof Array&&(t="COMBO");return{type:t}}(n),i=e.size;t.options&&t.options.forceInput||e.addInput(t.name,s,{widget:{name:t.name,[bt]:()=>n}});for(const o of e.widgets)o.last_y+=LiteGraph.NODE_SLOT_HEIGHT;e.setSize([Math.max(i[0],e.size[0]),Math.max(i[1],e.size[1])])}const wt=function(e){var t,n,s,i;const o=e.constructor.type,a=e.properties.origVals||{},l=a.title||e.title,r=a.color||e.color,A=a.bgcolor||e.bgcolor,d=e,u={size:[...e.size],color:r,bgcolor:A,pos:[...e.pos]};let p=[],c=[];if(e.inputs)for(const g of e.inputs)if(g.link){const t=g.name,n=e.findInputSlot(t),s=e.getInputNode(n),i=e.getInputLink(n);p.push([i.origin_slot,s,t])}if(e.outputs)for(const g of e.outputs)if(g.links){const e=g.name;for(const t of g.links){const n=graph.links[t],s=graph._nodes_by_id[n.target_id];c.push([e,s,n.target_slot])}}v.graph.remove(e);let h=v.graph.add(LiteGraph.createNode(o,l,u));function m(){if(d.widgets)for(let e of d.widgets)if("converted-widget"===e.type){const t=h.widgets.find((t=>t.name===e.name));for(let n of d.inputs)n.name===e.name&&Lt(h,t,n.widget)}for(let e of p){const[t,n,s]=e;n.connect(t,h.id,s)}for(let e of c){const[t,n,s]=e;h.connect(t,n,s)}}h.inputs.map(((t,n)=>{h.inputs[n].label=e.inputs[n].label})),h.outputs.map(((t,n)=>{h.outputs[n].label=e.outputs[n].label}));let f=d.widgets_values;if(!f&&(null==(t=h.widgets)?void 0:t.length)>0)return h.widgets.forEach(((e,t)=>{const n=d.widgets[t];e.name===n.name&&e.type===n.type&&(e.value=n.value)})),void m();if(f){let e=function(e,t){var n,s,i,o,a,l;if(!0===e||!1===e){if((null==(n=t.options)?void 0:n.on)&&(null==(s=t.options)?void 0:s.off))return{value:e,pass:!0}}else if("number"==typeof e){if((null==(i=t.options)?void 0:i.min)<=e&&e<=(null==(o=t.options)?void 0:o.max))return{value:e,pass:!0}}else{if(null==(l=null==(a=t.options)?void 0:a.values)?void 0:l.includes(e))return{value:e,pass:!0};if(t.inputEl&&"string"==typeof e)return{value:e,pass:!0}}return{value:t.value,pass:!1}},t=!1;const o=(null==f?void 0:f.length)<=(null==(n=h.widgets)?void 0:n.length);let a=o?0:f.length-1;const l=n=>{var s;const i=d.widgets[n];let l=h.widgets[n];if(l.name===i.name&&l.type===i.type){for(;(o?a<f.length:a>=0)&&!t;){let{value:t,pass:n}=e(f[a],l);if(n&&null!==t){l.value=t;break}a+=o?1:-1}a++,o||(a=f.length-((null==(s=h.widgets)?void 0:s.length)-1-n))}};if(o&&(null==(s=h.widgets)?void 0:s.length)>0)for(let n=0;n<h.widgets.length;n++)l(n);else if((null==(i=h.widgets)?void 0:i.length)>0)for(let n=h.widgets.length-1;n>=0;n--)l(n)}m()};v.registerExtension({name:"Comfy.EasyUse.ExtraMenu",async beforeRegisterNodeDef(e,t,n){ft(e,(function(e,n){n.unshift({content:q("🔃 Reload Node"),callback:(e,t,n,s,i)=>{let o=LGraphCanvas.active_canvas;if(!o.selected_nodes||Object.keys(o.selected_nodes).length<=1)wt(i);else for(let a in o.selected_nodes)wt(o.selected_nodes[a])}}),"easy ckptNames"==t.name&&n.unshift({content:q("💎 View Checkpoint Info..."),callback:(e,t,n,s,i)=>{i.widgets[0].value}})}));for(const s in ht)ht[s].nodes.includes(t.name)&&gt(`↪️ Swap ${ht[s].category}`,s,ht[s].nodes,e)}});const St=LiteGraph.LGraphNode,Et="➡️";v.registerExtension({name:"easy setNode",registerCustomNodes(){class e extends St{constructor(t){super("Set"),m(this,"defaultVisibility",!0),m(this,"serialize_widgets",!0),this.properties||(this.properties={previousName:""}),this.properties.showOutputText=e.defaultVisibility;const n=this;n.color=LGraphCanvas.node_colors.blue.color,this.addWidget("text","Constant","",((e,t,s,i,o)=>{n.validateName(n.graph),""!==this.widgets[0].value&&(this.title=Et+this.widgets[0].value),this.properties.previousName=this.widgets[0].value,this.update()}),{}),this.addInput("*","*"),this.onConnectionsChange=function(e,t,s,i,o){if(1!=e||s||(this.inputs[t].type="*",this.inputs[t].name="*",this.title="Set"),i&&n.graph&&1==e&&s){const e=n.graph._nodes.find((e=>e.id==i.origin_id)).outputs[i.origin_slot];if(!e)return;const t=e.type,s=n.is_auto_link?this.widgets[0].value:e.name;"Set"===this.title&&(this.title=Et+s,this.widgets[0].value=s),"*"===this.widgets[0].value&&(this.widgets[0].value=s),this.validateName(n.graph),this.inputs[0]&&(this.inputs[0].type=t,this.inputs[0].name=s),setTimeout((e=>{this.title=Et+this.widgets[0].value,this.properties.previousName=this.widgets[0].value}),1)}this.update()},this.validateName=function(e){let t=n.widgets[0].value;if(""!=t){let s=0,i=[];do{i=e._nodes.filter((e=>e!=this&&("easy setNode"==e.type&&e.widgets[0].value===t))),i.length>0&&(t=n.widgets[0].value+s),s++}while(i.length>0);n.widgets[0].value=t,this.update()}},this.clone=function(){const t=e.prototype.clone.apply(this);return t.inputs[0].name="*",t.inputs[0].type="*",t.properties.previousName="",t.size=t.computeSize(),t},this.onAdded=function(e){this.validateName(e)},this.update=function(){if(n.graph){this.findGetters(n.graph).forEach((e=>{e.setType(this.inputs[0].type)})),this.widgets[0].value&&this.findGetters(n.graph,!0).forEach((e=>{e.setName(this.widgets[0].value)}));n.graph._nodes.filter((e=>"easy getNode"==e.type)).forEach((e=>{e.setComboValues&&e.setComboValues()}))}},this.findGetters=function(e,t){const n=t?this.properties.previousName:this.widgets[0].value;return e._nodes.filter((e=>"easy getNode"==e.type&&e.widgets[0].value===n&&""!=n))},this.isVirtualNode=!0}onRemoved(){this.graph._nodes.filter((e=>"easy getNode"==e.type)).forEach((e=>{e.setComboValues&&e.setComboValues([this])}))}}LiteGraph.registerNodeType("easy setNode",Object.assign(e,{title:"Set"})),e.category="EasyUse/Util"}}),v.registerExtension({name:"easy getNode",registerCustomNodes(){class e extends St{constructor(t){super("Get"),m(this,"defaultVisibility",!0),m(this,"serialize_widgets",!0),this.properties||(this.properties={}),this.properties.showOutputText=e.defaultVisibility;const n=this;n.color=LGraphCanvas.node_colors.blue.color,this.addWidget("combo","Constant","",(e=>{this.onRename()}),{values:()=>n.graph._nodes.filter((e=>"easy setNode"==e.type)).map((e=>e.widgets[0].value)).sort()}),this.addOutput("*","*"),this.onConnectionsChange=function(e,t,n,s,i){this.validateLinks(),2!=e||n?(this.onRename(),setTimeout((e=>{this.title="⬅️"+this.widgets[0].value}),1)):(this.outputs[t].type="*",this.outputs[t].name="*",this.title="Get")},this.setName=function(e){n.widgets[0].value=e,n.onRename(),n.serialize()},this.onRename=function(e=0){const t=this.findSetter(n.graph);if(t){const n=t.inputs[0].type,s=t.inputs[0].name;this.setType(n,s),this.outputs[e].type=n,this.outputs[e].name=s,this.title="⬅️"+t.widgets[0].value}else this.setType("*","*"),this.outputs[e].type="*",this.outputs[e].name="*"},this.clone=function(){const t=e.prototype.clone.apply(this);return t.size=t.computeSize(),t},this.validateLinks=function(){"*"!=this.outputs[0].type&&this.outputs[0].links&&this.outputs[0].links.forEach((e=>{const t=n.graph.links[e];t&&t.type!=this.outputs[0].type&&"*"!=t.type&&n.graph.removeLink(e)}))},this.setType=function(e,t){this.outputs[0].name=t,this.outputs[0].type=e,this.validateLinks()},this.findSetter=function(e){const t=this.widgets[0].value;return e._nodes.find((e=>"easy setNode"==e.type&&e.widgets[0].value===t&&""!=t))},this.isVirtualNode=!0}getInputLink(e){const t=this.findSetter(this.graph);if(t){const n=t.inputs[e];return this.graph.links[n.link]}throw new Error("No setter found for "+this.widgets[0].value+"("+this.type+")")}onAdded(e){}}LiteGraph.registerNodeType("easy getNode",Object.assign(e,{title:"Get"})),e.category="EasyUse/Util"}}),b.addEventListener("easyuse-global-seed",(function(e){let t=app.graph._nodes_by_id;for(let n in t){let s=t[n];if("easy globalSeed"==s.type){if(s.widgets){const t=s.widgets.find((e=>"value"==e.name));s.widgets.find((e=>"last_seed"==e.name)).value=t.value,t.value=e.detail.value}}else if(s.widgets){const t=s.widgets.find((e=>"seed_num"==e.name||"seed"==e.name||"noise_seed"==e.name));t&&null!=e.detail.seed_map[s.id]&&(t.value=e.detail.seed_map[s.id])}}}));const kt=b.queuePrompt;b.queuePrompt=async function(e,{output:t,workflow:n}){n.seed_widgets={};for(let s in app.graph._nodes_by_id){let e=app.graph._nodes_by_id[s].widgets;if(e)for(let t in e)"seed_num"!=e[t].name&&"seed"!=e[t].name&&"noise_seed"!=e[t].name||"converted-widget"==e[t].type||(n.seed_widgets[s]=parseInt(t))}return await kt.call(b,e,{output:t,workflow:n})};const xt=["easy imageSave","easy fullkSampler","easy kSampler","easy kSamplerTiled","easy kSamplerInpainting","easy kSamplerDownscaleUnet","easy kSamplerSDTurbo","easy detailerFix"];v.registerExtension({name:"Comfy.EasyUse.SaveImageExtraOutput",async beforeRegisterNodeDef(e,t,n){if(xt.includes(t.name)){const t=e.prototype.onNodeCreated;e.prototype.onNodeCreated=function(){const e=t?t.apply(this,arguments):void 0,s=this.widgets.find((e=>"filename_prefix"===e.name||"save_prefix"===e.name));return s.serializeValue=()=>S(n,s.value),e}}else{const t=e.prototype.onNodeCreated;e.prototype.onNodeCreated=function(){const e=t?t.apply(this,arguments):void 0;return this.properties&&"Node name for S&R"in this.properties||this.addProperty("Node name for S&R",this.constructor.type,"string"),e}}}});const Nt=["easy wildcards","easy positive","easy negative","easy stylesSelector","easy promptConcat","easy promptReplace"],Ct=["easy preSampling","easy preSamplingAdvanced","easy preSamplingNoiseIn","easy preSamplingCustom","easy preSamplingDynamicCFG","easy preSamplingSdTurbo","easy preSamplingLayerDiffusion"],Tt=["easy kSampler","easy kSamplerTiled","easy kSamplerInpainting","easy kSamplerDownscaleUnet","easy kSamplerSDTurbo"],It=["easy controlnetLoader","easy controlnetLoaderADV"],Ot=["easy instantIDApply","easy instantIDApplyADV"],Rt=["easy ipadapterApply","easy ipadapterApplyADV","easy ipadapterApplyFaceIDKolors","easy ipadapterStyleComposition"],Dt=["easy pipeIn","easy pipeOut","easy pipeEdit","easy pipeEditPrompt"],Mt=["easy XYPlot","easy XYPlotAdvanced"],Pt=["easy setNode"],Gt=["Reroute","RescaleCFG","LoraLoaderModelOnly","LoraLoader","FreeU","FreeU_v2",...Rt,...Pt],zt={"easy seed":{from:{INT:["Reroute",...Ct,"easy fullkSampler"]}},"easy positive":{from:{STRING:["Reroute",...Nt]}},"easy negative":{from:{STRING:["Reroute",...Nt]}},"easy wildcards":{from:{STRING:["Reroute","easy showAnything",...Nt]}},"easy stylesSelector":{from:{STRING:["Reroute","easy showAnything",...Nt]}},"easy promptConcat":{from:{STRING:["Reroute","easy showAnything",...Nt]}},"easy promptReplace":{from:{STRING:["Reroute","easy showAnything",...Nt]}},"easy fullLoader":{from:{PIPE_LINE:["Reroute",...Ct,"easy fullkSampler",...Dt,...Pt],MODEL:Gt},to:{STRING:["Reroute",...Nt]}},"easy a1111Loader":{from:{PIPE_LINE:["Reroute",...Ct,...It,...Ot,...Dt,...Pt],MODEL:Gt},to:{STRING:["Reroute",...Nt]}},"easy comfyLoader":{from:{PIPE_LINE:["Reroute",...Ct,...It,...Ot,...Dt,...Pt],MODEL:Gt},to:{STRING:["Reroute",...Nt]}},"easy hunyuanDiTLoader":{from:{PIPE_LINE:["Reroute",...Ct,...It,...Ot,...Dt,...Pt],MODEL:Gt},to:{STRING:["Reroute",...Nt]}},"easy kolorsLoader":{from:{PIPE_LINE:["Reroute",...Ct,...It,...Ot,...Dt,...Pt],MODEL:Gt},to:{STRING:["Reroute",...Nt]}},"easy pixArtLoader":{from:{PIPE_LINE:["Reroute",...Ct,...It,...Ot,...Dt,...Pt],MODEL:Gt},to:{STRING:["Reroute",...Nt]}},"easy fluxLoader":{from:{PIPE_LINE:["Reroute",...Ct,...It,...Ot,...Dt,...Pt],MODEL:Gt},to:{STRING:["Reroute",...Nt]}},"easy svdLoader":{from:{PIPE_LINE:["Reroute","easy preSampling","easy preSamplingAdvanced","easy preSamplingDynamicCFG",...Dt,...Pt],MODEL:Gt},to:{STRING:["Reroute",...Nt]}},"easy zero123Loader":{from:{PIPE_LINE:["Reroute","easy preSampling","easy preSamplingAdvanced","easy preSamplingDynamicCFG",...Dt,...Pt],MODEL:Gt},to:{STRING:["Reroute",...Nt]}},"easy sv3dLoader":{from:{PIPE_LINE:["Reroute","easy preSampling","easy preSamplingAdvanced","easy preSamplingDynamicCFG",...Dt,...Pt],MODEL:Gt},to:{STRING:["Reroute",...Nt]}},"easy preSampling":{from:{PIPE_LINE:["Reroute",...Tt,...Dt,...It,...Mt,...Pt]}},"easy preSamplingAdvanced":{from:{PIPE_LINE:["Reroute",...Tt,...Dt,...It,...Mt,...Pt]}},"easy preSamplingDynamicCFG":{from:{PIPE_LINE:["Reroute",...Tt,...Dt,...It,...Mt,...Pt]}},"easy preSamplingCustom":{from:{PIPE_LINE:["Reroute",...Tt,...Dt,...It,...Mt,...Pt]}},"easy preSamplingLayerDiffusion":{from:{PIPE_LINE:["Reroute","easy kSamplerLayerDiffusion",...Tt,...Dt,...It,...Mt,...Pt]}},"easy preSamplingNoiseIn":{from:{PIPE_LINE:["Reroute",...Tt,...Dt,...It,...Mt,...Pt]}},"easy fullkSampler":{from:{PIPE_LINE:["Reroute",...Dt.reverse(),"easy preDetailerFix","easy preMaskDetailerFix",...Ct,...Pt]}},"easy kSampler":{from:{PIPE_LINE:["Reroute",...Dt.reverse(),"easy preDetailerFix","easy preMaskDetailerFix","easy hiresFix",...Ct,...Pt]}},"easy controlnetLoader":{from:{PIPE_LINE:["Reroute",...Ct,...It,...Ot,...Dt,...Pt]}},"easy controlnetLoaderADV":{from:{PIPE_LINE:["Reroute",...Ct,...It,...Ot,...Dt,...Pt]}},"easy instantIDApply":{from:{PIPE_LINE:["Reroute",...Ct,...It,...Ot,...Dt,...Pt],MODEL:Gt},to:{COMBO:["Reroute","easy promptLine"]}},"easy instantIDApplyADV":{from:{PIPE_LINE:["Reroute",...Ct,...It,...Ot,...Dt,...Pt],MODEL:Gt},to:{COMBO:["Reroute","easy promptLine"]}},"easy ipadapterApply":{to:{COMBO:["Reroute","easy promptLine"]}},"easy ipadapterApplyADV":{to:{STRING:["Reroute","easy sliderControl",...Nt],COMBO:["Reroute","easy promptLine"]}},"easy ipadapterStyleComposition":{to:{COMBO:["Reroute","easy promptLine"]}},"easy preDetailerFix":{from:{PIPE_LINE:["Reroute","easy detailerFix",...Dt,...Pt]},to:{PIPE_LINE:["Reroute","easy ultralyticsDetectorPipe","easy samLoaderPipe","easy kSampler","easy fullkSampler"]}},"easy preMaskDetailerFix":{from:{PIPE_LINE:["Reroute","easy detailerFix",...Dt,...Pt]}},"easy samLoaderPipe":{from:{PIPE_LINE:["Reroute","easy preDetailerFix",...Dt,...Pt]}},"easy ultralyticsDetectorPipe":{from:{PIPE_LINE:["Reroute","easy preDetailerFix",...Dt,...Pt]}},"easy cascadeLoader":{from:{PIPE_LINE:["Reroute","easy fullCascadeKSampler","easy preSamplingCascade",...It,...Dt,...Pt],MODEL:Gt.filter((e=>!Rt.includes(e)))}},"easy fullCascadeKSampler":{from:{PIPE_LINE:["Reroute","easy preSampling","easy preSamplingAdvanced",...Dt,...Pt]}},"easy preSamplingCascade":{from:{PIPE_LINE:["Reroute","easy cascadeKSampler",...Dt,...Pt]}},"easy cascadeKSampler":{from:{PIPE_LINE:["Reroute","easy preSampling","easy preSamplingAdvanced",...Dt,...Pt]}},"easy pipeEdit":{from:{PIPE_LINE:["Reroute",...Ct,...It,...Ot,...Pt]},to:{PIPE_LINE:["Reroute",...Ct,...It,...Ot,...Dt,...Pt]}},"easy pipeEditPrompt":{from:{PIPE_LINE:["Reroute",...Ct,...It,...Ot,...Pt]},to:{PIPE_LINE:["Reroute",...Ct,...It,...Ot,...Dt,...Pt]}}};v.registerExtension({name:"Comfy.EasyUse.Suggestions",async setup(e){LGraphCanvas.prototype.createDefaultNodeForSlot=function(e){e=e||{};var t,n=Object.assign({nodeFrom:null,slotFrom:null,nodeTo:null,slotTo:null,position:[],nodeType:null,posAdd:[0,0],posSizeFix:[0,0]},e),s=n.nodeFrom&&null!==n.slotFrom,i=!s&&n.nodeTo&&null!==n.slotTo;if(!s&&!i)return!1;if(!n.nodeType)return!1;var o=s?n.nodeFrom:n.nodeTo,a=s?n.slotFrom:n.slotTo,l=o.type,r=!1;switch(typeof a){case"string":r=s?o.findOutputSlot(a,!1):o.findInputSlot(a,!1),a=s?o.outputs[a]:o.inputs[a];break;case"object":r=s?o.findOutputSlot(a.name):o.findInputSlot(a.name);break;case"number":r=a,a=s?o.outputs[a]:o.inputs[a];break;default:return!1}var A=a.type==LiteGraph.EVENT?"_event_":a.type,d=s?LiteGraph.slot_types_default_out:LiteGraph.slot_types_default_in;if(d&&d[A]){a.link;let e=!1;const i=s?"from":"to";if(zt[l]&&zt[l][i]&&(null==(t=zt[l][i][A])?void 0:t.length)>0){for(var u in zt[l][i][A])if(n.nodeType==zt[l][i][A][u]||"AUTO"==n.nodeType){e=zt[l][i][A][u];break}}else if("object"==typeof d[A]||"array"==typeof d[A]){for(var u in d[A])if(n.nodeType==d[A][u]||"AUTO"==n.nodeType){e=d[A][u];break}}else n.nodeType!=d[A]&&"AUTO"!=n.nodeType||(e=d[A]);if(e){var p=!1;"object"==typeof e&&e.node&&(p=e,e=e.node);var c=LiteGraph.createNode(e);if(c){if(p){if(p.properties)for(var h in p.properties)c.addProperty(h,p.properties[h]);if(p.inputs)for(var h in c.inputs=[],p.inputs)c.addOutput(p.inputs[h][0],p.inputs[h][1]);if(p.outputs)for(var h in c.outputs=[],p.outputs)c.addOutput(p.outputs[h][0],p.outputs[h][1]);p.title&&(c.title=p.title),p.json&&c.configure(p.json)}return this.graph.add(c),c.pos=[n.position[0]+n.posAdd[0]+(n.posSizeFix[0]?n.posSizeFix[0]*c.size[0]:0),n.position[1]+n.posAdd[1]+(n.posSizeFix[1]?n.posSizeFix[1]*c.size[1]:0)],s?n.nodeFrom.connectByType(r,c,A):n.nodeTo.connectByTypeOutput(r,c,A),!0}}}return!1},LGraphCanvas.prototype.showConnectionMenu=function(e){e=e||{};var t,n=Object.assign({nodeFrom:null,slotFrom:null,nodeTo:null,slotTo:null,e:null,allow_searchbox:this.allow_searchbox,showSearchBox:this.showSearchBox},e),s=this,i=n.nodeFrom&&n.slotFrom,o=!i&&n.nodeTo&&n.slotTo;if(!i&&!o)return!1;var a=i?n.nodeFrom:n.nodeTo,l=i?n.slotFrom:n.slotTo,r=!1;switch(typeof l){case"string":r=i?a.findOutputSlot(l,!1):a.findInputSlot(l,!1),l=i?a.outputs[l]:a.inputs[l];break;case"object":r=i?a.findOutputSlot(l.name):a.findInputSlot(l.name);break;case"number":r=l,l=i?a.outputs[l]:a.inputs[l];break;default:return!1}var A=["Add Node",null];n.allow_searchbox&&(A.push("Search"),A.push(null));var d=l.type==LiteGraph.EVENT?"_event_":l.type,u=i?LiteGraph.slot_types_default_out:LiteGraph.slot_types_default_in,p=a.type;if(u&&u[d]){const e=i?"from":"to";if(zt[p]&&zt[p][e]&&(null==(t=zt[p][e][d])?void 0:t.length)>0)for(var c in zt[p][e][d])A.push(zt[p][e][d][c]);else if("object"==typeof u[d]||"array"==typeof u[d])for(var c in u[d])A.push(u[d][c]);else A.push(u[d])}var h=new LiteGraph.ContextMenu(A,{event:n.e,title:(l&&""!=l.name?l.name+(d?" | ":""):"")+(l&&d?d:""),callback:function(e,t,o){switch(e){case"Add Node":LGraphCanvas.onMenuAdd(null,null,o,h,(function(e){i?n.nodeFrom.connectByType(r,e,d):n.nodeTo.connectByTypeOutput(r,e,d)}));break;case"Search":i?n.showSearchBox(o,{node_from:n.nodeFrom,slot_from:l,type_filter_in:d}):n.showSearchBox(o,{node_to:n.nodeTo,slot_from:l,type_filter_out:d});break;default:s.createDefaultNodeForSlot(Object.assign(n,{position:[n.e.canvasX,n.e.canvasY],nodeType:e}))}}});return!1}}}),v.registerExtension({name:"Comfy.EasyUse.TimeTaken",setup(){let e=new Map,t=0;b.addEventListener("execution_start",(e=>{graph&&graph._nodes.forEach((e=>{e.executionDuration&&delete e.executionDuration}))})),b.addEventListener("executing",(n=>{if(!x("EasyUse.Nodes.Runtime",null))return;const s=(null==n?void 0:n.node)||(null==n?void 0:n.detail)||null,i=e.get(t);if(e.delete(t),t&&i){const e=Date.now()-i,n=be(t);n&&(n.executionDuration||(n.executionDuration=0),n.executionDuration=n.executionDuration+e/1e3)}t=s,e.set(s,Date.now())}))},beforeRegisterNodeDef(e,t){const n=e.prototype.onDrawForeground;e.prototype.onDrawForeground=function(...e){const[t]=e;return function(e,t){if(!t)return;t=parseFloat(t).toFixed(3)+q("s"),e.save(),e.fillStyle=LiteGraph.NODE_DEFAULT_BGCOLOR,function(e,t,n,s,i,o){e.beginPath(),e.moveTo(t+o,n),e.lineTo(t+s-o,n),e.arcTo(t+s,n,t+s,n+o,o),e.lineTo(t+s,n+i-o),e.arcTo(t+s,n+i,t+s-o,n+i,o),e.lineTo(t+o,n+i),e.arcTo(t,n+i,t,n+i-o,o),e.lineTo(t,n+o),e.arcTo(t,n,t+o,n,o),e.closePath()}(e,0,-LiteGraph.NODE_TITLE_HEIGHT-20,e.measureText(t).width+10,LiteGraph.NODE_TITLE_HEIGHT-10,4),e.fill(),function(e,t,n,s,i="#000",o=12,a="Inter"){e.font=`${o}px ${a}`,e.fillStyle=i,e.fillText(t,n,s)}(e,t,8,-LiteGraph.NODE_TITLE_HEIGHT-6,LiteGraph.NODE_TITLE_COLOR),e.restore()}(t,this.executionDuration),null==n?void 0:n.apply(this,e)}}});let jt=null;v.registerExtension({name:"Comfy.EasyUse.HotKeys",setup(){if(void 0!==g){g("up,down,left,right",(function(e,t){var n,s,i,o,a,l,r,A,d,u,p,c,h,m,f;e.preventDefault();if(!x("EasyUse.Hotkeys.JumpNearestNodes",null))return;const g=_e();if(0===g.length)return;const y=g[0];switch(t.key){case"up":case"left":let e=null;if(xe(y)){const e=null==(n=y.widgets_values)?void 0:n[0],t=null==(s=y.graph)?void 0:s._nodes,i=null==t?void 0:t.find((t=>{var n;if(Ne(t)){if((null==(n=t.widgets_values)?void 0:n[0])===e)return t}return null}));i&&we(i)}else if((null==(i=y.inputs)?void 0:i.length)>0){for(let t=0;t<y.inputs.length;t++)if(y.inputs[t].link){e=y.inputs[t].link;break}if(e){const t=null==(o=y.graph)?void 0:o.links;if(t[e]){const n=null==(a=t[e])?void 0:a.origin_id,s=null==(r=null==(l=y.graph)?void 0:l._nodes_by_id)?void 0:r[n];s&&we(s)}}}break;case"down":case"right":let t=null;if(Ne(y)){const e=null==(A=y.widgets_values)?void 0:A[0],t=null==(d=y.graph)?void 0:d._nodes,n=null==t?void 0:t.find((t=>{var n;if(xe(t)){if((null==(n=t.widgets_values)?void 0:n[0])===e)return t}return null}));n&&we(n)}else if((null==(u=y.outputs)?void 0:u.length)>0){for(let e=0;e<y.outputs.length;e++)if((null==(p=y.outputs[e].links)?void 0:p.length)>0&&y.outputs[e].links[0]){t=y.outputs[e].links[0];break}if(t){const e=null==(c=y.graph)?void 0:c.links;if(e[t]){const n=null==(h=e[t])?void 0:h.target_id,s=null==(f=null==(m=y.graph)?void 0:m._nodes_by_id)?void 0:f[n];s&&we(s)}}}}})),g("shift+up,shift+down,shift+left,shift+right,shift+alt+⌘+left,shift+alt+⌘+right,shift+alt+ctrl+left,shift+alt+ctrl+right",(function(e,t){e.preventDefault();if(!x("EasyUse.Hotkeys.AlignSelectedNodes",null))return;const n=_e();if(n.length<=1)return;const s=n;switch(t.key){case"shift+up":LGraphCanvas.alignNodes(s,"top",s[0]);break;case"shift+down":LGraphCanvas.alignNodes(s,"bottom",s[0]);break;case"shift+left":LGraphCanvas.alignNodes(s,"left",s[0]);break;case"shift+right":LGraphCanvas.alignNodes(s,"right",s[0]);break;case"shift+alt+ctrl+left":case"shift+alt+⌘+left":je(s,"horizontal");break;case"shift+alt+ctrl+right":case"shift+alt+⌘+right":je(s,"vertical")}jt||(jt=Q()),jt&&jt.update()})),g("shift+⌘+left,shift+⌘+right,shift+ctrl+left,shift+ctrl+right",(function(e,t){e.preventDefault();if(!x("EasyUse.Hotkeys.NormalizeSelectedNodes",null))return;const n=_e();if(n.length<=1)return;const s=n;switch(t.key){case"shift+ctrl+left":case"shift+⌘+left":ze(s,"width");break;case"shift+ctrl+right":case"shift+⌘+right":ze(s,"height")}jt||(jt=Q()),jt&&jt.update()})),g("shift+g",(function(e,t){e.preventDefault();x("EasyUse.Hotkeys.AddGroup",null)&&(Ut(),jt||(jt=Q()),jt&&jt.update())})),g("shift+r",(function(e,t){e.preventDefault();x("EasyUse.Hotkeys.cleanVRAMused",null)&&tt()})),g("shift+m",(function(e,t){var n,s,i;if(!x("EasyUse.Hotkeys.toggleNodesMap",null))return;let o=(null==(n=v.extensionManager)?void 0:n.sidebarTab)||v.extensionManager,a=(null==(s=v.extensionManager.sidebarTab)?void 0:s.activeSidebarTabId)||(null==(i=v.extensionManager)?void 0:i.activeSidebarTab);o.activeSidebarTabId=a==G?null:G}));const e=[];Array.from(Array(10).keys()).forEach((t=>e.push(`alt+${t}`))),g(e.join(","),(async function(e,t){e.preventDefault();if(!x("EasyUse.Hotkeys.NodesTemplate",null))return;const n=t.key;let s=parseInt(n.split("+")[1]);const i=await b.getUserData("comfy.templates.json");let o=null;if(200==i.status)try{o=await i.json()}catch(l){Ve.error(q("Get Node Templates File Failed"))}else localStorage["Comfy.NodeTemplates"]?o=JSON.parse(localStorage["Comfy.NodeTemplates"]):Ve.warn(q("No Node Templates Found"));if(!o)return void Ve.warn(q("No Node Templates Found"));s=0===s?9:s-1;const a=o[s];if(a)try{const e=(null==a?void 0:a.name)||"Group",t=(null==a?void 0:a.data)?JSON.parse(a.data):[];Vt((async()=>{await E.registerFromWorkflow(t.groupNodes,{}),localStorage.litegrapheditor_clipboard=a.data,v.canvas.pasteFromClipboard(),t.groupNodes||Ut(e)}))}catch(l){Ve.error(l)}else Ve.warn(q("Node template with {key} not set").replace("{key}",n))}));const t=async function(e){if(("b"===e.key||"m"==e.key)&&(e.metaKey||e.ctrlKey)){if(0===_e().length)return;jt||(jt=Q()),jt&&jt.update()}};window.addEventListener("keydown",t,!0)}}});const Vt=async e=>{const t=localStorage.litegrapheditor_clipboard;await e(),localStorage.litegrapheditor_clipboard=t},Ut=e=>{const t=_e();if(0===t.length)return;const n=t;let s=new LiteGraph.LGraphGroup;s.title=e||"Group",((e,t=[],n=20)=>{var s,i,o,a,l,r,A,d,u,p;for(var c of(i=o=a=l=-1,r=A=d=u=-1,[e._nodes,t]))for(var h in c)r=(p=c[h]).pos[0],A=p.pos[1],d=p.pos[0]+p.size[0],u=p.pos[1]+p.size[1],"Reroute"!=p.type&&(A-=LiteGraph.NODE_TITLE_HEIGHT),(null==(s=p.flags)?void 0:s.collapsed)&&(u=A+LiteGraph.NODE_TITLE_HEIGHT,(null==p?void 0:p._collapsed_width)&&(d=r+Math.round(p._collapsed_width))),(-1==i||r<i)&&(i=r),(-1==o||A<o)&&(o=A),(-1==a||d>a)&&(a=d),(-1==l||u>l)&&(l=u);o-=Math.round(1.4*e.font_size),e.pos=[i-n,o-n],e.size=[a-i+2*n,l-o+2*n]})(s,n),v.canvas.graph.add(s)};function Wt(e,t,n,s){const i=[];return e.workflow.links.forEach((e=>{n&&e[1]===t&&!i.includes(e[3])&&i.push(e[3]),s&&e[3]===t&&!i.includes(e[1])&&i.push(e[1])})),i}async function Ft(e,t=!1){const n=structuredClone(await v.graphToPrompt()),s=[];if(n.workflow.nodes.forEach((e=>{s.push(e.id)})),n.workflow.links=n.workflow.links.filter((e=>s.includes(e[1])&&s.includes(e[3]))),t)for(;!v.graph._nodes_by_id[e].isChooser;)e=Wt(n,e,!0,!1)[0];const i=function(e,t){const n=[],s=[t];for(;s.length>0;){const t=s.pop();n.push(t),s.push(...Wt(e,t,!0,!1).filter((e=>!(n.includes(e)||s.includes(e)))))}s.push(...n.filter((e=>e!=t)));const i=[t];for(;s.length>0;){const t=s.pop();i.push(t),s.push(...Wt(e,t,!1,!0).filter((e=>!(i.includes(e)||s.includes(e)))))}const o=[];return o.push(...n),o.push(...i.filter((e=>!o.includes(e)))),o}(n,e);n.workflow.nodes=n.workflow.nodes.filter((t=>(t.id===e&&t.inputs.forEach((e=>{e.link=null})),i.includes(t.id)))),n.workflow.links=n.workflow.links.filter((e=>i.includes(e[1])&&i.includes(e[3])));const o={};for(const[r,A]of Object.entries(n.output))i.includes(parseInt(r))&&(o[r]=A);const a={};for(const[r,A]of Object.entries(o[e.toString()].inputs))Array.isArray(A)||(a[r]=A);o[e.toString()].inputs=a,n.output=o;const l=v.graphToPrompt;v.graphToPrompt=()=>(v.graphToPrompt=l,n),v.queuePrompt(0)}const Xt=new class{constructor(){this.current_node_id=void 0,this.class_of_current_node=null,this.current_node_is_chooser=!1}update(){var e,t;return v.runningNodeId!=this.current_node_id&&(this.current_node_id=v.runningNodeId,this.current_node_id?(this.class_of_current_node=null==(t=null==(e=v.graph)?void 0:e._nodes_by_id[v.runningNodeId.toString()])?void 0:t.comfyClass,this.current_node_is_chooser="easy imageChooser"===this.class_of_current_node):(this.class_of_current_node=void 0,this.current_node_is_chooser=!1),!0)}},Zt=class e{constructor(){}static idle(){return!v.runningNodeId}static paused(){return!0}static paused_here(t){return e.here(t)}static running(){return!e.idle()}static here(e){return v.runningNodeId==e}static state(){return"Paused"}};m(Zt,"cancelling",!1);let qt=Zt;function Ht(e,t){const n=new FormData;n.append("message",t),n.append("id",e),b.fetchApi("/easyuse/image_chooser_message",{method:"POST",body:n})}function Kt(){Ht(-1,"__cancel__"),qt.cancelling=!0,b.interrupt(),qt.cancelling=!1}var Yt=0;function Jt(){Yt+=1}const Bt=["easy kSampler","easy kSamplerTiled","easy fullkSampler"];function Qt(e){const t=v.graph._nodes_by_id[e.detail.id];if(t){t.selected_images=new Set,t.anti_selected=new Set;const n=function(e,t){var n;return e.imgs=[],t.forEach((t=>{const n=new Image;e.imgs.push(n),n.onload=()=>{v.graph.setDirtyCanvas(!0)},n.src=`/view?filename=${encodeURIComponent(t.filename)}&type=temp&subfolder=${v.getPreviewFormatParam()}`})),null==(n=e.setSizeForImage)||n.call(e),e.imgs}(t,e.detail.urls);return{node:t,image:n,isKSampler:Bt.includes(t.type)}}}function $t(e,t,n){var s;if(e.imageRects)s=e.imageRects[t];else{const t=e.imagey;s=[1,t+1,e.size[0]-2,e.size[1]-t-2]}n.strokeRect(s[0]+1,s[1]+1,s[2]-2,s[3]-2)}class en extends L{constructor(){super(),this.node=null,this.select_index=[],this.dialog_div=null}show(e,t){this.select_index=[],this.node=t;const n=e.map(((e,n)=>{const s=_("img",{src:e.src,onclick:e=>{this.select_index.includes(n)?(this.select_index=this.select_index.filter((e=>e!==n)),s.classList.remove("selected")):(this.select_index.push(n),s.classList.add("selected")),t.selected_images.has(n)?t.selected_images.delete(n):t.selected_images.add(n)}});return s}));super.show(_("div.comfyui-easyuse-chooser-dialog",[_("h5.comfyui-easyuse-chooser-dialog-title",q("Choose images to continue")),_("div.comfyui-easyuse-chooser-dialog-images",n)]))}createButtons(){const e=super.createButtons();return e[0].onclick=e=>{qt.running()&&Kt(),super.close()},e.unshift(_("button",{type:"button",textContent:q("Choose Selected Images"),onclick:e=>{Ht(this.node.id,[...this.node.selected_images,-1,...this.node.anti_selected]),qt.idle()&&(Jt(),Ft(this.node.id).then((()=>{Ht(this.node.id,[...this.node.selected_images,-1,...this.node.anti_selected])}))),super.close()}})),e}}function tn(){const e=v.graph._nodes_by_id[this.node_id];if(e){const t=[...e.selected_images];(null==t?void 0:t.length)>0&&e.setProperty("values",t),Ht(e.id,[...e.selected_images,-1,...e.anti_selected]),qt.idle()&&(Jt(),Ft(e.id).then((()=>{Ht(e.id,[...e.selected_images,-1,...e.anti_selected])})))}}function nn(){qt.running()&&Kt()}function sn(e){Object.defineProperty(e,"clicked",{get:function(){return this._clicked},set:function(e){this._clicked=e&&""!=this.name}})}function on(e){e.options||(e.options={}),e.options.serialize=!1}v.registerExtension({name:"Comfy.EasyUse.imageChooser",init(){window.addEventListener("beforeunload",Kt,!0)},setup(e){const t=LGraphCanvas.prototype.draw;LGraphCanvas.prototype.draw=function(){Xt.update()&&e.graph._nodes.forEach((e=>{e.update&&e.update()})),t.apply(this,arguments)},b.addEventListener("easyuse-image-choose",(function(e){const{node:t,image:n,isKSampler:s}=Qt(e);if(s){(new en).show(n,t)}}));const n=b.interrupt;b.interrupt=function(){qt.cancelling||Kt(),n.apply(this,arguments)},b.addEventListener("execution_start",(function(){(Yt>0?(Yt-=1,0):(Ht(-1,"__start__"),1))&&e.graph._nodes.forEach((e=>{(e.selected_images||e.anti_selected)&&(e.selected_images.clear(),e.anti_selected.clear(),e.update())}))}))},async nodeCreated(e,t){if("easy imageChooser"==e.comfyClass){e.setProperty("values",[]),void 0===(null==e?void 0:e.imageIndex)&&Object.defineProperty(e,"imageIndex",{get:function(){return null},set:function(t){e.overIndex=t}}),void 0===(null==e?void 0:e.imagey)&&Object.defineProperty(e,"imagey",{get:function(){return null},set:function(t){return e.widgets[e.widgets.length-1].last_y+LiteGraph.NODE_WIDGET_HEIGHT}});const t=e.onMouseDown;e.onMouseDown=function(n,s,i){if(n.isPrimary){const t=function(e,t){var n,s;if((null==(n=e.imgs)?void 0:n.length)>1)for(var i=0;i<e.imageRects.length;i++){const n=t[0]-e.imageRects[i][0],s=t[1]-e.imageRects[i][1];if(n>0&&n<e.imageRects[i][2]&&s>0&&s<e.imageRects[i][3])return i}else if(1==(null==(s=e.imgs)?void 0:s.length)&&t[1]>e.imagey)return 0;return-1}(e,s);t>=0&&this.imageClicked(t)}return t&&t.apply(this,arguments)},e.send_button_widget=e.addWidget("button","","",tn),e.cancel_button_widget=e.addWidget("button","","",nn),sn(e.cancel_button_widget),sn(e.send_button_widget),on(e.cancel_button_widget),on(e.send_button_widget)}},beforeRegisterNodeDef(e,t,n){if("easy imageChooser"==(null==t?void 0:t.name)){const t=e.prototype.onDrawBackground;e.prototype.onDrawBackground=function(e){t.apply(this,arguments),function(e,t){var n;if(e.imgs){if(e.imageRects)for(let n=0;n<e.imgs.length;n++){t.fillStyle="#000",t.fillRect(...e.imageRects[n]);const i=e.imgs[n],o=e.imageRects[n][2],a=e.imageRects[n][3];let l=o/i.width,r=a/i.height;var s=Math.min(l,r);let A=s*i.height,d=s*i.width;const u=e.imageRects[n][0]+(o-d)/2,p=e.imageRects[n][1]+(a-A)/2,c=2;t.drawImage(i,u+c,p+c,d-2*c,A-2*c)}t.lineWidth=2,t.strokeStyle="green",e&&e.selected_images&&e.selected_images.forEach((n=>{$t(e,n,t)})),t.strokeStyle="#F88",null==(n=null==e?void 0:e.anti_selected)||n.forEach((n=>{$t(e,n,t)}))}}(this,e)},e.prototype.imageClicked=function(t){"easy imageChooser"===(null==e?void 0:e.comfyClass)&&(this.selected_images.has(t)?this.selected_images.delete(t):this.selected_images.add(t),this.update())};const n=e.prototype.update;e.prototype.update=function(){var e;if(n&&n.apply(this,arguments),this.send_button_widget){this.send_button_widget.node_id=this.id;const t=(this.selected_images?this.selected_images.size:0)+(this.anti_selected?this.anti_selected.size:0),n=(null==(e=this.imgs)?void 0:e.length)||0;qt.paused_here(this.id)&&t>0?this.send_button_widget.name=t>1?"Progress selected ("+t+"/"+n+")":"Progress selected image":this.send_button_widget.name=t>0?t>1?"Progress selected ("+t+"/"+n+")":"Progress selected image as restart":""}if(this.cancel_button_widget){const e=qt.running();this.cancel_button_widget.name=e?"Cancel current run":""}this.setDirtyCanvas(!0,!0)}}}}),Number.prototype.div=function(e){return function(e,t){let n,s,i=0,o=0,a="string"==typeof e?e:e.toString(),l="string"==typeof t?t:t.toString();try{i=a.toString().split(".")[1].length}catch(r){}try{o=l.toString().split(".")[1].length}catch(r){}return n=Number(a.toString().replace(".","")),s=Number(l.toString().replace(".","")),n/s*Math.pow(10,o-i)}(this,e)};let an=[],ln=0;const rn={sd3:6.5,"sd3-turbo":4};class An extends L{constructor(){super(),this.lists=[],this.dialog_div=null,this.user_div=null}addItem(e,t){return _("div.easyuse-account-dialog-item",[_("input",{type:"text",placeholder:"Enter name",oninput:e=>{const t=Array.prototype.indexOf.call(this.dialog_div.querySelectorAll(".easyuse-account-dialog-item"),e.target.parentNode);an[t].name=e.target.value},value:an[e].name}),_("input.key",{type:"text",oninput:e=>{const t=Array.prototype.indexOf.call(this.dialog_div.querySelectorAll(".easyuse-account-dialog-item"),e.target.parentNode);an[t].key=e.target.value},placeholder:"Enter APIKEY",value:an[e].key}),_("button.choose",{textContent:q("Choose"),onclick:async e=>{var n,s,i;const o=Array.prototype.indexOf.call(this.dialog_div.querySelectorAll(".easyuse-account-dialog-item"),e.target.parentNode);let a=an[o].name,l=an[o].key;if(!a)return void Ve.error(q("Please enter the account name"));if(!l)return void Ve.error(q("Please enter the APIKEY"));let r=!0;for(let t=0;t<an.length;t++)if(!an[t].key){r=!1;break}if(!r)return void Ve.error(q("APIKEY is not Empty"));ln=o;const A=new FormData;A.append("api_keys",JSON.stringify(an)),A.append("current",ln);const d=await b.fetchApi("/easyuse/stability/set_api_keys",{method:"POST",body:A});if(200==d.status){const e=await d.json();if((null==e?void 0:e.account)&&(null==e?void 0:e.balance)){const o=(null==(n=e.account)?void 0:n.profile_picture)||null,a=(null==(s=e.account)?void 0:s.email)||null,l=(null==(i=e.balance)?void 0:i.credits)||0;t.replaceChildren(_("div.easyuse-account-user-info",{onclick:e=>{(new An).show(t)}},[_("div.user",[_("div.avatar",o?[_("img",{src:o})]:"😀"),_("div.info",[_("h5.name",a),_("h6.remark","Credits: "+l)])]),_("div.edit",{textContent:q("Edit")})])),Ve.success(q("Save Succeed"))}else Ve.success(q("Save Succeed"));this.close()}else Ve.error(q("Save Failed"))}}),_("button.delete",{textContent:q("Delete"),onclick:e=>{const t=Array.prototype.indexOf.call(this.dialog_div.querySelectorAll(".easyuse-account-dialog-item"),e.target.parentNode);an.length<=1?Ve.error(q("At least one account is required")):(an.splice(t,1),this.dialog_div.removeChild(e.target.parentNode))}})])}show(e){an.forEach(((t,n)=>{this.lists.push(this.addItem(n,e))})),this.dialog_div=_("div.easyuse-account-dialog",this.lists),super.show(_("div.easyuse-account-dialog-main",[_("div",[_("a",{href:"https://platform.stability.ai/account/keys",target:"_blank",textContent:q("Getting Your APIKEY")})]),this.dialog_div]))}createButtons(){const e=super.createButtons();return e.unshift(_("button",{type:"button",textContent:q("Save Account Info"),onclick:e=>{let t=!0;for(let n=0;n<an.length;n++)if(!an[n].key){t=!1;break}if(t){const e=new FormData;e.append("api_keys",JSON.stringify(an)),b.fetchApi("/easyuse/stability/set_api_keys",{method:"POST",body:e}).then((e=>{200==e.status?Ve.success(q("Save Succeed")):Ve.error(q("Save Failed"))}))}else Ve.error(q("APIKEY is not Empty"))}})),e.unshift(_("button",{type:"button",textContent:q("Add Account"),onclick:e=>{const t="Account "+an.length.toString();an.push({name:t,key:""});const n=this.addItem(an.length-1);this.lists.push(n),this.dialog_div.appendChild(n)}})),e}}v.registerExtension({name:"Comfy.EasyUse.API.SD3",async beforeRegisterNodeDef(e,t,n){if("easy stableDiffusion3API"==t.name){const t=e.prototype.onNodeCreated;e.prototype.onNodeCreated=async function(){var e,n,s;t&&(null==t||t.apply(this,arguments));const i=this.widgets.find((e=>["seed_num","seed"].includes(e.name))),o=this.widgets.find((e=>["control_before_generate","control_after_generate"].includes(e.name)));let a=this.widgets.find((e=>"model"==e.name));a.callback=e=>{l.value="-"+rn[e]};const l=this.addWidget("text","cost_credit","0",(e=>{}),{serialize:!1});l.disabled=!0,setTimeout((e=>{"control_before_generate"==o.name&&0===i.value&&(i.value=Math.floor(4294967294*Math.random())),l.value="-"+rn[a.value]}),100);let r=_("div.easyuse-account-user",[q("Loading UserInfo...")]);this.addDOMWidget("account","btn",_("div.easyuse-account",r)),b.addEventListener("stable-diffusion-api-generate-succeed",(async({detail:e})=>{var t;let n=r.querySelectorAll(".remark");if(n&&n[0]){const t=(null==e?void 0:e.model)?rn[e.model]:0;if(t){let e=function(e,t){let n,s,i,o,a,l;a="string"==typeof e?e:e.toString(),l="string"==typeof t?t:t.toString();try{n=a.split(".")[1].length}catch(r){n=0}try{s=l.split(".")[1].length}catch(r){s=0}return i=Math.pow(10,Math.max(n,s)),o=n>=s?n:s,((e*i-t*i)/i).toFixed(o)}(parseFloat(n[0].innerText.replace(/Credits: /g,"")),t);e>0&&(n[0].innerText="Credits: "+e.toString())}}await K(1e4);const s=await b.fetchApi("/easyuse/stability/balance");if(200==s.status){const e=await s.json();if(null==e?void 0:e.balance){const s=(null==(t=e.balance)?void 0:t.credits)||0;n&&n[0]&&(n[0].innerText="Credits: "+s)}}}));const A=await b.fetchApi("/easyuse/stability/api_keys");if(200==A.status){let t=await A.json();if(an=t.keys,ln=t.current,an.length>0&&void 0!==ln){const t=an[ln].key,i=an[ln].name;if(t){const t=await b.fetchApi("/easyuse/stability/user_info");if(200==t.status){const i=await t.json();if((null==i?void 0:i.account)&&(null==i?void 0:i.balance)){const t=(null==(e=i.account)?void 0:e.profile_picture)||null,o=(null==(n=i.account)?void 0:n.email)||null,a=(null==(s=i.balance)?void 0:s.credits)||0;r.replaceChildren(_("div.easyuse-account-user-info",{onclick:e=>{(new An).show(r)}},[_("div.user",[_("div.avatar",t?[_("img",{src:t})]:"😀"),_("div.info",[_("h5.name",o),_("h6.remark","Credits: "+a)])]),_("div.edit",{textContent:q("Edit")})]))}}}else r.replaceChildren(_("div.easyuse-account-user-info",{onclick:e=>{(new An).show(r)}},[_("div.user",[_("div.avatar","😀"),_("div.info",[_("h5.name",i),_("h6.remark",q("Click to set the APIKEY first"))])]),_("div.edit",{textContent:q("Edit")})]))}}}}}});let dn=null;function un(){dn&&(dn.removeEventListeners(),dn.dropdown.remove(),dn=null)}function pn(e,t,n,s=!1){un(),new cn(e,t,n,s)}class cn{constructor(e,t,n,s=!1){this.dropdown=document.createElement("ul"),this.dropdown.setAttribute("role","listbox"),this.dropdown.classList.add("easy-dropdown"),this.selectedIndex=-1,this.inputEl=e,this.suggestions=t,this.onSelect=n,this.isDict=s,this.focusedDropdown=this.dropdown,this.buildDropdown(),this.onKeyDownBound=this.onKeyDown.bind(this),this.onWheelBound=this.onWheel.bind(this),this.onClickBound=this.onClick.bind(this),this.addEventListeners()}buildDropdown(){this.isDict?this.buildNestedDropdown(this.suggestions,this.dropdown):this.suggestions.forEach(((e,t)=>{this.addListItem(e,t,this.dropdown)}));const e=this.inputEl.getBoundingClientRect();this.dropdown.style.top=e.top+e.height-10+"px",this.dropdown.style.left=e.left+"px",document.body.appendChild(this.dropdown),dn=this}buildNestedDropdown(e,t){let n=0;Object.keys(e).forEach((s=>{const i=e[s];if("object"==typeof i&&null!==i){const e=document.createElement("ul");e.setAttribute("role","listbox"),e.classList.add("easy-nested-dropdown");const o=document.createElement("li");o.classList.add("folder"),o.textContent=s,o.appendChild(e),o.addEventListener("mouseover",this.onMouseOver.bind(this,n,t)),t.appendChild(o),this.buildNestedDropdown(i,e),n+=1}else{const e=document.createElement("li");e.classList.add("item"),e.setAttribute("role","option"),e.textContent=s,e.addEventListener("mouseover",this.onMouseOver.bind(this,n,t)),e.addEventListener("mousedown",this.onMouseDown.bind(this,s)),t.appendChild(e),n+=1}}))}addListItem(e,t,n){const s=document.createElement("li");s.setAttribute("role","option"),s.textContent=e,s.addEventListener("mouseover",this.onMouseOver.bind(this,t)),s.addEventListener("mousedown",this.onMouseDown.bind(this,e)),n.appendChild(s)}addEventListeners(){document.addEventListener("keydown",this.onKeyDownBound),this.dropdown.addEventListener("wheel",this.onWheelBound),document.addEventListener("click",this.onClickBound)}removeEventListeners(){document.removeEventListener("keydown",this.onKeyDownBound),this.dropdown.removeEventListener("wheel",this.onWheelBound),document.removeEventListener("click",this.onClickBound)}onMouseOver(e,t){t&&(this.focusedDropdown=t),this.selectedIndex=e,this.updateSelection()}onMouseOut(){this.selectedIndex=-1,this.updateSelection()}onMouseDown(e,t){t.preventDefault(),this.onSelect(e),this.dropdown.remove(),this.removeEventListeners()}onKeyDown(e){const t=Array.from(this.focusedDropdown.children),n=t[this.selectedIndex];if(dn)if(38===e.keyCode)e.preventDefault(),this.selectedIndex=Math.max(0,this.selectedIndex-1),this.updateSelection();else if(40===e.keyCode)e.preventDefault(),this.selectedIndex=Math.min(t.length-1,this.selectedIndex+1),this.updateSelection();else if(39===e.keyCode){if(e.preventDefault(),n&&n.classList.contains("folder")){const e=n.querySelector(".easy-nested-dropdown");e&&(this.focusedDropdown=e,this.selectedIndex=0,this.updateSelection())}}else if(37===e.keyCode&&this.focusedDropdown!==this.dropdown){const e=this.focusedDropdown.closest(".easy-dropdown, .easy-nested-dropdown").parentNode.closest(".easy-dropdown, .easy-nested-dropdown");e&&(this.focusedDropdown=e,this.selectedIndex=Array.from(e.children).indexOf(this.focusedDropdown.parentNode),this.updateSelection())}else if((13===e.keyCode||9===e.keyCode)&&this.selectedIndex>=0){e.preventDefault(),n.classList.contains("item")&&(this.onSelect(t[this.selectedIndex].textContent),this.dropdown.remove(),this.removeEventListeners());const s=n.querySelector(".easy-nested-dropdown");s&&(this.focusedDropdown=s,this.selectedIndex=0,this.updateSelection())}else 27===e.keyCode&&(this.dropdown.remove(),this.removeEventListeners())}onWheel(e){const t=parseInt(this.dropdown.style.top);localStorage.getItem("Comfy.Settings.Comfy.InvertMenuScrolling")?this.dropdown.style.top=t+(e.deltaY<0?10:-10)+"px":this.dropdown.style.top=t+(e.deltaY<0?-10:10)+"px"}onClick(e){this.dropdown.contains(e.target)||e.target===this.inputEl||(this.dropdown.remove(),this.removeEventListeners())}updateSelection(){Array.from(this.focusedDropdown.children).forEach(((e,t)=>{t===this.selectedIndex?e.classList.add("selected"):e.classList.remove("selected")}))}}function hn(e){const t=e.min||0,n=e.max||0,s=e.step||1;if(0===s)return[];const i=[];let o=t;for(;o<=n;){if(Number.isInteger(s))i.push(Math.round(o)+"; ");else{let e=o.toFixed(3);-0==e&&(e="0.000"),/\.\d{3}$/.test(e)||(e+="0"),i.push(e+"; ")}o+=s}return n>=0&&t>=0?i:i.reverse()}let mn={},fn={};function gn(e,t){String(e.id);const n=t.name,s=t.value.replace(/^(loader|preSampling):\s/,"");fn[n]?fn[n]!=mn[s]&&(fn[n]=mn[s]):fn={...fn,[n]:mn[s]}}v.registerExtension({name:"Comfy.EasyUse.XYPlot",async beforeRegisterNodeDef(e,t,n){if("easy XYPlot"===t.name){mn=t.input.hidden.plot_dict[0];for(const e in mn){const t=mn[e];if(Array.isArray(t)){let n=[];for(const e of t)n.push(e+"; ");mn[e]=n}else mn[e]="object"==typeof t?"seed"==e?t+"; ":hn(t):t+"; "}mn.None=[],mn["---------------------"]=[]}},nodeCreated(e){"easy XYPlot"===e.comfyClass&&(function(e){if(e.widgets)for(const t of e.widgets)if("x_axis"===t.name||"y_axis"===t.name){let n=t.value;Object.defineProperty(t,"value",{get:()=>n,set(s){s!==n&&(n=s,gn(e,t))}})}}(e),function(e){if(e.widgets){const t=e.widgets.filter((e=>"customtext"===e.type&&!1!==e.dynamicPrompts||e.dynamicPrompts));for(const e of t){let t=function(e,t,s,i){return e&&(t[s]=e),t.map((e=>n(e,i))).filter((e=>""!==e)).join("")},n=function(e,t){if(e=s(e),i(e,t))return e+"; ";let n=o(e,t);return 1===n.length||2===n.length?n[0]:i(a(e),t)?a(e)+"; ":""},s=function(e){return e.replace(/(\n|;| )/g,"")},i=function(e,t){return t.includes(e+"; ")},o=function(e,t){return t.filter((t=>t.toLowerCase().includes(e.toLowerCase())))},a=function(e){return Number(e)?Number(e).toFixed(3):["0","0.","0.0","0.00","00"].includes(e)?"0.000":e};const l=function(){const n=e.name[0]+"_axis";let s=(null==fn?void 0:fn[n])||[];if(0===s.length)return;const i=e.inputEl.value,o=e.inputEl.selectionStart;let a=i.split("; ");const l=i.substring(0,o).split("; ").length-1,r=a[l].replace(/\n/g,"").toLowerCase(),A=s.filter((e=>e.toLowerCase().includes(r))).map((e=>e.replace(/; /g,"")));if(A.length>0)pn(e.inputEl,A,(n=>{const i=t(n,a,l,s);e.inputEl.value=i}));else{un();const n=t(null,a,l,s);e.inputEl.value=n}};e.inputEl.removeEventListener("input",l),e.inputEl.addEventListener("input",l),e.inputEl.removeEventListener("mouseup",l),e.inputEl.addEventListener("mouseup",l)}}}(e))}});export{q as $,P as N,b as a,v as b,ge as c,x as d,tt as e,G as f,fe as g,N as h,Se as j,Z as l,K as s,Ve as t,Q as u};
